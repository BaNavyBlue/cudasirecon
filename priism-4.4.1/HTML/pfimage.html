<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: pfimage</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to compute a pupil function image from a parametric description of the pupil function.">
  <META NAME="Keywords" CONTENT="Priism,pfimage,pupil function">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="pfimage">pfimage</A></H1>
<P>pfimage takes a parametric description of a pupil function, generated
by <A HREF="pffit.html">pffit</A>, and computes an image of the pupil
function.  The image of the pupil function may be used with
<A HREF="pf2psf.html">pf2psf</A> to generate a sampled version of the point
spread function.

<P>To use pfimage, invoke it from the command line.  The expected form of
the command line is (optional parts are shown in brackets):

<PRE>
    pfimage <VAR>parametric_pupil_file</VAR> <VAR>pupil_image</VAR> \
        [-w=<VAR>w1</VAR>[:<VAR>w2</VAR>...]] [-center=cx[:cy]] \
        [-lens=<VAR>n</VAR>] [-na=<VAR>n</VAR>] [-nimm=<VAR>n</VAR>] \
        [-polarf_amp=<VAR>n</VAR>:<VAR>m</VAR>] [-polarf_phase=<VAR>n</VAR>:<VAR>m</VAR>] \
        [-sampling=<VAR>dx</VAR>[:<VAR>dy</VAR>]] [-separate] \
        [-size=<VAR>nx</VAR>[:<VAR>ny</VAR>]] \
        [-wv=<VAR>w1</VAR>[:<VAR>w2</VAR>...]] \
        [-zernike_amp=<VAR>n</VAR>[:<VAR>m</VAR>]] [-zernike_phase=<VAR>n</VAR>[:<VAR>m</VAR>]] \
</PRE>

<P>or

<PRE>
    pfimage -h
</PRE>

<P>where the latter form simply prints a description of the expected input
parameters and then exits.  The meanings of the different entries on the
command line are:

<DL>
  <DT><VAR>parametric_pupil_file</VAR>
  <DD><VAR>parametric_pupil_file</VAR> is the name of the file containing
    the parameterized pupil function.  The expected format of the file
    is described in the
    <A HREF="OTFAndPupil.html#otf_format">OTF and pupil function documentation</A>.

  <DT><VAR>pupil_image</VAR>
  <DD><VAR>pupil_image</VAR> is the name of the image file to generate.

  <DT><CODE>-center=</CODE><VAR>cx</VAR><CODE>:</CODE><VAR>cy</VAR>
  <DD>Sets the pixel coordinates for the center of the pupil image.  By
    default, pfimage places the center at floor((<VAR>nx</VAR> - 1) / 2),
    floor((ny - 1) / 2) where <VAR>nx</VAR> and <VAR>ny</VAR> are the
    dimensions, in pixels, of the image.

  <DT><CODE>-lens=</CODE><VAR>n</VAR>
  <DD>Causes pfimage to use <VAR>n</VAR> as the lens identification number.
    By default, pfimage uses the lens number from the input file.

  <DT><CODE>-na=</CODE><VAR>n</VAR>
  <DD>Causes pfimage to use <VAR>n</VAR> as the numerical aperture.  By
    default, pfimage uses the numerical aperture recorded in the input file.

  <DT><CODE>-nimm=</CODE><VAR>n</VAR>
  <DD>Causes pfimage to use <VAR>n</VAR> as refractive index of the immersion
    media.  By default, pfimage uses the immersion media refractive index
    recorded in the input file.

  <DT><CODE>-polarf_amp=</CODE><VAR>n</VAR><CODE>:</CODE><VAR>m</VAR>
  <DD>Causes pfimage to use a subset of the polar Fourier terms used to
    parameterize the amplitude (if <VAR>n</VAR> or <VAR>m</VAR> is negative,
    none of the polar Fourier terms for the amplitude will be used).  By
    default, pfimage uses all the polar Fourier terms present in the input.

  <DT><CODE>-polarf_phase=</CODE><VAR>n</VAR><CODE>:</CODE><VAR>m</VAR>
  <DD>Causes pfimage to use a subset of the polar Fourier terms used to
    parameterize the phase (if <VAR>n</VAR> or <VAR>m</VAR> is negative,
    none of the polar Fourier terms for the phase will be used).  By default,
    pfimage uses all the polar Fourier terms present in the input.

  <DT><CODE>-sampling=</CODE><VAR>dx</VAR>[<CODE>:</CODE><VAR>dy</VAR>]
  <DD>Sets the spatial sampling (in units of microns) of the generated
    image.  If you omit <VAR>dy</VAR>, pfimage uses <VAR>dx</VAR> as the
    sampling for both the x and y dimensions.  If you do not specify the
    spatial sampling, pfimage sets the sampling in both directions to
    be the value of the minimum wavelength processed divided by four times
    the numerical aperture.

  <DT><CODE>-separate</CODE>
  <DD>Causes pfimage to write out the amplitude and phase of the pupil
    function as separate images:  the amplitude will be the first
    section and the phase will be the second.  By default, pfimage writes
    a single complex-valued image of the pupil function.

  <DT><CODE>-size=</CODE><VAR>nx</VAR>[<CODE>:</CODE><VAR>ny</VAR>]
  <DD>Sets the x and y dimensions, in pixels of the image.  If you omit
    <VAR>ny</VAR>, pfimage uses <VAR>nx</VAR> as the size of the x and
    y dimensions.  If you do not specify the dimensions, pfimage uses
    nicesize(76 * maximum wavelength processed) / (pi * numerical aperture *
    sampling) as the size where nicesize is a function that returns the
    next largest integer that is the product of small primes.  The default
    roughly corresponds to the size needed to encompass twenty zeroes of
    the Airy disk.

  <DT><CODE>-w=</CODE><VAR>w1</VAR>[<CODE>:</CODE><VAR>w2</VAR>...]
  <DD>Limits the wavelengths to process.  A wavelength may be specified
    by its zero-based index in the input file or by its wavelength in
    nanometers.  By default, pfimage process the first five wavelengths
    from the input file.

  <DT><CODE>-wv=</CODE><VAR>w1</VAR>[<CODE>:</CODE><VAR>w2</VAR>...]
  <DD>Causes pfimage to use the specified values (assumed to be in nanometers)
    as the wavelengths for the wavelengths processed.  By default, pfimage
    uses the wavelengths recorded in the input file.

  <DT><CODE>-zernike_amp=</CODE><VAR>n</VAR>[<CODE>:</CODE><VAR>m</VAR>]
  <DD>Causes pfimage to use a subset of the Zernike polynomials used to
    parameterize the amplitude (if <VAR>n</VAR> is less than zero, no
    polynomials will be used).  By default, pfimage will use all the Zernike
    polynomials present in the file.

  <DT><CODE>-zernike_phase=</CODE><VAR>n</VAR>[<CODE>:</CODE><VAR>m</VAR>]
  <DD>Causes pfimage to use a subset of the Zernike polynomials used to
    parameterize the phase (if <VAR>n</VAR> is less than zero, no
    polynomials will be used).  By default, pfimage will use all the Zernike
    polynomials present in the file.
</DL>

<H2>Related Priism Topics</H2>
<P>
   <A HREF="OTFAndPupil.html">OTF and pupil function documentation</A> |
   <A HREF="pffit.html">pffit</A> |
   <A HREF="pf2psf.html">pf2psf</A> |
   <A HREF="Priism.html">Priism</A>
<HR>

</BODY>
</HTML>
