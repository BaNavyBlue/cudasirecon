<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Known Problems and Limitations in IVE/Priism</TITLE>
  <META NAME="Author" CONTENT="IVE Development Team">
  <META NAME="Description" CONTENT="Describes known problems with IVE">
  <META NAME="Keywords" CONTENT="IVE,Priism,limitations,problems,bugs">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>

<BODY>

<H1><A NAME="Overview">Known Problems and Limitations in IVE/Priism</A></H1>
<H2>Overview</H2>
<P>The known problems have been categorized by application; those
which apply to many applications can be found in the
<A HREF="#GeneralIssues">general category</A>.

<H3>Topics</H3>
<P>
   Overview |
   <A HREF="#GeneralIssues">General problems</A> |
   <A HREF="#ImageWindows">Image windows</A> |
   <A HREF="#ProcessingApps">Processing applications</A> |
   <A HREF="#ModelingApps">Modeling applications</A> |
   <A HREF="#OtherApps">Other applications</A> |
   <A HREF="#IMLibrary">IM library</A> |
   <A HREF="#IWLibrary">IW library</A> |
   <A HREF="#WMLibrary">WM library</A> |
   <A HREF="#IPLibrary">IP library</A>

<H3>Related Priism Topics</H3>
<P>
   <A HREF="Priism.html">Priism</A> |
   <A HREF="RecentChanges.html">Recent changes</A> |
   <A HREF="FAQ/index.html">IVE 4 FAQ</A> |
   <A HREF="BugReport.html">Reporting problems</A>
<HR>

<H2><A NAME="GeneralIssues">General Problems</A></H2>
<UL>
  <LI>Almost all applications internally use single precision floating-point
    values to store image data; that is not enough precision to adequately
    handle images stored as 32-bit integers.
  <LI>Priism does not clean up properly if you log out or the X server dies
    while Priism is running.  There is a chance (for versions prior to
    Priism 4.1.6 it is a certainty) that the remains of the Priism session
    will interfere the next time Priism is started.  Use of ivekill (see
    the answers to questions 7 and 9 in the
    <A HREF="FAQ/index.html">IVE 4 FAQ</A>) is the recommended solution.
  <LI>The layout of directories and files in the Priism distribution is not
    compatible with those for an application in /opt according to
    the <A HREF="http://www.pathname.com/fhs/2.2/fhs-3.12.html" TARGET="_top">Filesystem Hierarchy Standard</A>.
  <LI>Some documentation, not directly related to deconvolution, references
    the deconvolution documentation which is not included with the
    publicly distributed version.
  <LI>(OS X 10.3 and earlier) If the shared memory file is on a HFS+ file
    system (which is the normal case), the first Priism application that is
    closed takes an unusually long time to exit (the time is apparently spent
    in the close() system call on the shared memory file).
  <LI>(OS X with Apple's X11 beta quartz-wm) If an application has iconified
    dialogs, iconifying the application's main dialog causes the previously
    iconified dialogs to appear on the screen without window manager
    decorations.
</UL>
<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="ImageWindows">Image Windows</A></H2>
<UL>
  <LI>The effect of different offsets for different waves (i.e. as set
    with the Align program) is not taken into account when drawing graphics
    on top of the images (except for object library graphics which are used by
    Clouds).
  <LI>When a scratch window is not full, it is possible to step past the
    end of the sections that have been used so far.
  <LI>In RGB mode, if an application sets the currently displayed wave to
    one that is not drawn, the slider along side the image still functions
    to change the current section but the mouse buttons do not.
  <LI>Applications are not notified when the monitor window changes size.
    So if they have graphics which are drawn in window coordinates (rather
    than the coordinates for the image data), they will be not be able to
    update their graphics are not able to update their graphics appropriately
    (this affects picking regions in EMTAR).
  <LI>The File-&gt;Save function always uses the native byte ordering but every
    other Priism application saves images with big-endian byte ordering.  This
    is of no concern if the files are used by other Priism applications, but
    may make a difference for other applications that read MRC format files.
  <LI>The positioning of images within the window changes when the resolution
    is changed.
  <LI>Have observed incorrectly redrawn image windows after resizing the
    window on XFree86 4.1 systems and the Window Maker window manager.
    Changing sections (or anything else that causes a redraw) causes the
    correct display to be drawn.
  <LI>It is not uncommon for window managers to ignore requests to change
    the window border and title bar decorations; under window managers
    that do so, the IWAlDisWinBdr function call has no effect.
  <LI>(OS X with Apple's X11 or XFree86 4.3) When an application adds
    a graphic (for instance Pick Points or Edit Polygon) the graphic
    does not appear until something forces a full redraw.  With Apple's
    X11, you can turn off the "prefer double buffer" startup option in
    the preferences to avoid the problem.  XFree86 4.3 only provides
    double-buffered visuals and there is no known solution to the problem.
  <LI>(OS X on Intel-based IMac and ATI graphics card) Dragging or resizing
    the region of interest for EM reconstruction causes the image to
    disappear.  In some other instances, the image disappears when an
    application adds a graphic to an image window.  Forcing a redraw causes
    the image to reappear.  Turning off the "prefer double buffer" startup
    option in the preferences appears to solve the problem.  We do not
    know if this problem affects other Mac hardware configurations.
  <LI>(OS X with 10.5.7 or later) On some Macs the 10.5.7 update caused
    images displayed in Priism to appear gabled and flicker.  Turn off
    the "Stereo in window" start option in the preferences to avoid the
    problem.
  <LI>(OS X with Apple's X11) Image window contents are not refreshed when
    the computer returns from sleep.
</UL>
<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="ProcessingApps">Processing Applications</A></H2>
<UL>
  <LI>The convolution, Filter 2D, and Filter 3D applications do not work
    with complex data.
  <LI>CCDCor and Convolution are missing documentation in the old-style format.
  <LI>The bead alignment and EMTAR user interfaces occasionally die because
    of X window errors when parameter subdialogs are displayed or hidden.
  <LI>The bead alignment applications only handle data sets with 500 sections
    or less.
  <LI>The elliptically-weighted backprojection step in EM reconstruction only
    handles tilt series with widths up to 16384.
  <LI>For simplex, the extended header on the output is likely not correct
    if the input wavelengths are drawn from multiple files.
</UL>
<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="ModelingApps">Modeling Applications</A></H2>
<UL>
  <LI>In 3D Model, connecting a branch point in one object to a branch point
    in another causes parts of the objects to be lost.
  <LI>In 3D Model, an attempt to connect an object to itself causes an
    infinite loop.
  <LI>In 3D Model, dots added with the "just dots" option are not visible
    unless lighting is on and the background is not black.
  <LI>The option in 3D Model to turn off the special mark for the current point
    does not affect what is displayed in image windows.
  <LI>Pick Points watches for presses of the tab key in the image window
    to change the current picking mode, but Motif uses the tab key to transfer
    focus from one dialog control to another.
  <LI>In Region Growing or Find Points, if region growing results for the
    mask or masked input are only generated for a subset of the input z,
    time, or wavelength values, then the extended header of the generated
    data is not appropriately shuffled.
  <LI>Output of multiple wavelengths is unreliable with strait's cookie
    option:  the data for the all wavelengths except the last can be lost.
  <LI>Tracer only works with image windows.
  <LI>With a synthetic test case (an image with two greylevels), Tracer and
    3D Model's automodel did not perform well because an early termination
    condition in the search is sensitive to round-off error.
</UL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="OtherApps">Other Applications</A></H2>
<UL>
  <LI>(Linux, OS X) 2D Plot and MonToPS only support the option to print to
    a file; print preview and sending the result directly to a printer are not
    enabled.
  <LI>Flip may thrash badly if the input is an image window and even more
    so if the output is another image window.
  <LI>Line Profile's x, y, or diagonal profiles are not handled correctly
    when the source image window displays multiple sections and the step
    direction is not z.
  <LI>The rendering of graphics drawn on images is different in MonToPS than
    it is in the image window:  graphics in window coordinates are not clipped
    at the window edges and graphics from 3D Model are not shown.
  <LI>The Priism menu bar does not need resize handles.
  <LI>Projection algorithm in Rotfast breaks down as the tilt approaches +90
    or -90 degrees (for instance get completely black image at +90).
  <LI>A dialbox affects all image windows currently used by Volume Viewer
    for interactive display; no method is provided to restrict the dials to
    affect the image window with focus.
  <LI>There is a half-pixel (in data coordinates) offset in x and y between
    VolumeViewer results and the overlay models from 3D Model.
  <LI>The software renderer in VolumeViewer effectively cuts off a one pixel
    (in data coordinates) from the top, right, and upper edges of the input
    volume.
  <LI>Volume Viewer does not handle complex-valued data.
  <LI>Volume Viewer is missing documentation in the old-style format.
</UL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="IMLibrary">IM Library</A></H2>
<UL>
  <LI>The mechanism for detecting when byte-swapping is necessary limits
    the x or y dimensions of a data set to be less then 65536.  The library
    can not detect if byte-swapping is necessary if the x and y dimensions
    of a data set are both zero.
  <LI>When an application uses IM calls without any calls to IWAlScl or
    IWAlSecScl and writes a result to an image window, the results often do
    not appear "right" because each section is scaled separately.  The default
    scaling done in this case should be drawn the minimum and maximum values
    from the header.
</UL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="IWLibrary">IW Library</A></H2>
<UL>
  <LI>The following functions are possibly useful to clients but are
    poorly documented:  IWAlQuePri, IWCopyPartialData, IWGetAppXDisplay,
    IWGrGetGrPtr, IWRetArenaPtr, IWRtCurDataGraphics, IWRtCurWinGraphics,
    IWSetAppXDisplay, IWSetComplexNormalValue, and IWTransformPartialDataType.
  <LI>The following functions set or retrieve state information that
    has no effect on image window behavior:  IWAlOffsetGroup,
    IWRtOffsetGroup, and IWRtScrnGeom.
  <LI>The following functions have no effect:  IWLowerWin, IWRaiseWin, and
    IWRtLastDLWin.
  <LI>The following functions have out-of-date internal implementations:
    IWAllocTrueColor, IWRtFontAscent, IWRegDisChg, IWRegEvt, IWUnregDisChg,
    and IWUnregEvt.
  <LI>IWCopyPartialData and IWTransformPartialDataType do not work with
    data in the IW_COMPLEX_SHORT format.
  <LI>It is not uncommon for window managers to ignore requests to change
    the window border and title bar decorations; the values returned by
    IWAlDisWinBdr and IWRtWinDisWinBdr do not indicate whether or not the
    window manager honored the request.
</UL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="WMLibrary">WM Library</A></H2>
<UL>
  <LI>The following functions are possibly useful to clients but lack
    documentation:  WMInitChainCmd, WMStopChainCmd, WMProcessEvent,
    WMSync, WMNotExecutable, WMProcClientMessage, WMCancelClientMessage,
    WMUpdateFuncList, WMRetAppContext, WMGetShellWidget, WMProcExtEvent,
    WMCancelExtEvent, and (in the Fortran interface only) WMGetEnv.  Also,
    the functions for working with the saved parameters and scaling preferences
    are not documented.
  <LI>(Linux, OS X)  The version of the WM library compiled with the
    LessTif library ignores requests to put menus or dialogs into the
    overlay planes even if they are available.
</UL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="IPLibrary">IP Library</A></H2>
<UL>
  <LI>Assumes at least one input file is specified.
  <LI>Allows the user to append to data sets with multiple resolutions,
    but does not fill in the lower resolution versions of the appended data.
  <LI>The tests for whether or not it is safe to have an input and output
    have the same name are overly restrictive.
  <LI>Some callback constants mentioned in the header file are not used
    anywhere (REG_DIS_CHG, UN_REG_DIS_CHG, ENV_CMD, VIEW_FILE).
</UL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<HR>
<ADDRESS>
  IVE Development Team (<A HREF="mailto:ive@msg.ucsf.edu">ive@msg.ucsf.edu</A>)
</ADDRESS>

</BODY>
</HTML>
