<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: SurfHarmMod</TITLE>
  <META NAME="Description" CONTENT="On-line help for SurfHarmMod.">
  <META NAME="Keywords" CONTENT="Priism,modeling,surface harmonics">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="SurfHarmMod">Surface Harmonic Expansion of Existing Model</A></H1>
<H2>Overview</H2>

<P>SurfHarmMod reads model files readable by
<A HREF="3DModel.html">3DModel</A>, and fits the surfaces of the objects
in the model with surface harmonic expansions.  This can smooth the
surfaces and eliminate irregularities introduced in the modeling process.

<P>To use, select the input model file.  After that is selected, you
can use the <A HREF="WMStcArrDialogSimple.html">Choose objects to fit</A>
button to limit the fitting process to a subset of the objects in the
model.

<P>Then select the <A HREF="#OutputFormat">output format</A>.  Depending
on which format is chosen, there are additional parameters that can be
specified.  At minimum, you'll provide the name of an output file;  for
descriptions of the other parameters see the
<A HREF="#OutputFormat">descriptions of the output formats</A>.

<P>Finally adjust the <A HREF="#Order">order of the expansion</A>
(the number of shapes used to fit the surface) and press the <EM>doit</EM>
button.

<H3>Topics</H3>
<P>
   Overview |
   <A HREF="WMStcArrDialogSimple.html">Choosing Objects</A> |
   <A HREF="#OutputFormat">Output Formats</A> |
   <A HREF="#Order">Order</A>


<H3>Related Priism Topics</H3>
<P>
   <A HREF="3DModel.html">3DModel</A> |
   <A HREF="VolumeBuilder.html">Volume Builder</A> |
   <A HREF="Priism.html">Priism</A>

<HR>

<H2><A NAME="OutputFormat">Form of the Generated Model</A></H2>

<P>There are two different types of output models that can be generated.
The first is directly readable by <A HREF="3DModel.html">3DModel</A> and
can be in one of two forms:  <EM>Wire/Solid</EM> is a mesh of triangles
that covers the surface and <EM>Dots</EM> is a selection of points that
fall on the surface.  The only parameter specifically for this form of
output is the name of the model file to generate.

<P>The second form of output model consists of slices through the objects
in the model with the resulting sections represented as a polygons.  This
format uses pixel coordinates to specify the polygons so you'll need to
enter the file or image window whose coordinate system will be used to
do the conversion.  The results will be stored in the file you specify
as the <EM>Polygon File</EM> and can be used wherever Priism needs polygon
input.  If you specify a file name for the <EM>Object List</EM>, the
association between polygons to form the objects in the model is recorded
in that file.  It is readable by <A HREF="VolumeBuilder.html">VolumeBuilder</A>
using <EM>load object list</EM> with the <EM>old vol. build</EM> format.
Because it is easy to find the polygons that intersect the boundaries of the
data set, the option to exclude objects which intersect the edges from
the output is also provided.

<H3>Topics</H3>
<P>
   <A HREF="#SurfHarmMod">Overview</A> |
   <A HREF="WMStcArrDialogSimple.html">Choosing Objects</A> |
   Output Formats |
   <A HREF="#Order">Order</A>
<HR>

<H2><A NAME="Order">Order of Expansion</A></H2>

<P>The fitting is done by adjusting the coefficients in the weighted sum of
a sequence of functions (the surface harmonics).  Increasing the order
introduces more terms into the sequence allowing greater deviations from a
spherical shape (what you get with a zero order expansion) and less smoothing
of the input objects.  To exclude potential bad points in the input models,
the fitting is done in two stages.  The first stage uses <EM>Order1</EM> for
the order of the series expansion; then points which are more than 1.0 units
(in terms of the units in the image header) from the fit are excluded and
the second stage of fitting is done with <EM>Order2</EM> for the order of
the series expansion.

<H3>Topics</H3>
<P>
   <A HREF="#SurfHarmMod">Overview</A> |
   <A HREF="WMStcArrDialogSimple.html">Choosing Objects</A> |
   <A HREF="#OutputFormat">Output Formats</A> |
   Order
<HR>

</BODY>
</HTML>
