<!DOCTYPE HTML PUBLIC "-//W3C//DTD 3.2 HTML//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: Resample2D</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to perform a 2D coordinate transformation.">
  <META NAME="Keywords" CONTENT="Priism,coordinate transformation,resample">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="Resample2D">Resample2D</A></H1>
<H2>Overview</H2>
<P>Use Resample2D to reorient or resize an image file section-by-section.

<H3>Topics</H3>
<P>
  <A HREF="Region.html">Region processing</A> |
  <A HREF="#ZRotation">Z rotation</A> |
  <A HREF="#ShiftInXY">Shift in XY</A> |
  <A HREF="#AngleBetweenAxes">Angle between axes</A> |
  <A HREF="#MagnificationInXY">Magnification in XY</A> |
  <A HREF="#Center">Image center</A> |
  <A HREF="#OutputXYSize">Output XY size</A> |
  <A HREF="#KeepCellDimensions">Keep cell dimensions</A> |
  <A HREF="#Autosize">Autosize</A> |
  <A HREF="#CommandLine">Command line</A>

<H3>Related Priism Topics</H3>
<P>
  <A HREF="Rotate3D.html">Rotate3D</A> |
  <A HREF="Priism.html">Priism</A>
<HR>

<H2><A NAME="ZRotation">Z rotation</A></H2>
<P>This field is the angle (clockwise, in degrees) by which each section is
rotated.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="ShiftInXY">Shift in XY</A></H2>
<P>Each section is shifted by this amount after the rotation, skewing, and
magnification are applied.  The displacements are in pixels.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="AngleBetweenAxes">Angle between axes</A></H2>
<P>Specifies an angle between the X and Y axes.  If other than 90, the image
will be skewed by this amount.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="MagnificationInXY">Magnification in XY</A></H2>
<P>This field holds the factors by which the x and y directions are magnified
or reduced.  The new image is calculated by bilinear interpolation.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="Center">Image center</A></H2>
<P>This field specifies the point, in pixel coordinates, about which the
rotation is done.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="OutputXYSize">Output XY Size</A></H2>
<P>Use this field to specify the size of the output image in pixels.  If
the <A HREF="#Autosize">autosize toggle</A> is on, this field will be
automatically changed when the <A HREF="#MagnificationInXY">magnification</A>
is changed.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="KeepCellDimensions">Keep cell dimensions</A></H2>
<P>When this toggle is on, the cell dimensions (the pixel spacing times the
sampling frequency) will be the same in the output as they are in the input.
If the sampling frequencies in the input are all one, preserving the cell
dimensions will force the reported output pixel spacings to be the same as the
input spacings.  Otherwise, the sampling frequencies are set equal to the
output dimensions, and the reported output pixel spacing will be the input cell
dimensions divided by the altered sampling frequencies.

<P>When this toggle is off, the cell dimensions may not be preserved.  The
output pixel spacing in x and y will be the input pixel spacing divided by
the <A HREF="#MagnificationInXY">magnification</A>.  The output pixel spacing
in z will be the input pixel spacing in z times the z step size.  If the
sampling frequencies in the input are all one, the sampling frequencies in the
output will be the same.  Otherwise, the sampling frequencies are set equal to
the output dimensions.  The cell dimensions of the output will be product of
the modified pixel spacings and sampling frequencies.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="Autosize">Autosize</A></H2>
<P>When this toggle is on and the
<A HREF="#MagnificationInXY">magnification</A> is adjusted, the
<A HREF="#OutputXYSize">output size</A> will be changed automatically to
be the given magnification times the input image size and the
<A HREF="#Center">center</A> will be reset to the center of the input image.

<P><A HREF="#Resample2D">Return to overview</A>
<HR>

<H2><A NAME="CommandLine">Command Line</A></H2>
<P>Resample2D accepts the command-line arguments described in
<A HREF="Region.html#COMMANDLINE">Region.html</A>, including the
<CODE>-prompt</CODE> option to operate in a text-only mode.  In addition,
Resample2D has the following options:

<DL>
  <DT><CODE>-axes_angle=</CODE><VAR>angle</VAR>
  <DD>Specifies the angle, in degrees, between the x and y axes; if not
    specified, the default is 90 degrees.

  <DT><CODE>-center=</CODE><VAR>x</VAR><CODE>:</CODE><VAR>y</VAR>
  <DD>Specifies the pixel coordinates in the input about which the rotation
    (specified by <CODE>-rotation</CODE>) is done.  The default value is
    the center of the processed region.

  <DT><CODE>-mag=</CODE><VAR>x_mag</VAR><CODE>:</CODE><VAR>y_mag</VAR>
  <DD>Specifies the factors by which the x and y directions are magnified.
    If not specified, no magnification is done.

  <DT><CODE>-rotation=</CODE><VAR>angle</VAR>
  <DD>Specifies the angle, in degrees, that the images are rotated about
    the z axis.  A positive value causes a clockwise rotation.  If not
    specified, no rotation is done.

  <DT><CODE>-same_cell</CODE>
  <DD>If specified, the output will have x and y cell dimensions (the pixel
    spacing times the sampling frequency) which are the same as the input's
    x and y cell dimensions.  If not specified, the cell dimensions may not
    be preserved.  For more details, consult the
    <A HREF="#KeepCellDimensions">"Keep cell dimensions" topic</A>.

  <DT><CODE>-shift=</CODE><VAR>x_shift</VAR><CODE>:</CODE><VAR>y_shift</VAR>
  <DD>Specifies the x and y displacements, in pixels, applied to the images
    after rotation, skewing and magnification are applied.  If not specified,
    no shift is applied.

  <DT><CODE>-size=</CODE><VAR>x_size</VAR><CODE>:</CODE><VAR>y_size</VAR>
  <DD>Specifies the x and y dimensions for the images produced.  If not
    specified, the output size is calculated by multiplying the size of the
    input region by the magnification factors.
</DL>

<P>As an example, if embryo.dat contained images that were 480x512, then
the following command would generate embryo_x2.dat which would contain
the data rotated by 90 degrees counterclockwise and resampled to a
two times finer grid:
<PRE>
    Resample2D embryo.dat embryo_x2.dat -rotation=-90 \
        -mag=2:2 -size=1024:960
</PRE>

<P><A HREF="#Resample2D">Return to overview</A>

<HR>

</BODY>
</HTML>
