<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: FixBadPixel</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to take a list of bad points and replace their values in a dataset by interpolation of neighboring values.">
  <META NAME="Keywords" CONTENT="Priism,processing,calibration,interpolation">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="FixBadPixel">FixBadPixel</A></H1>
<H2>Overview</H2>
<P>FixBadPixel takes a list of points and an image stack and for each point
in the list replaces the value at the point by a value interpolated from
two of its neighbors in the same section.  When points in the list are
adjacent, the algorithm attempts to interpolate from points not in the list
and, when that is not possible, to do a series of interpolations (first for the
points in the list which can be interpolated from points not in the list and
then for those that are successively farther away from such points).  When such
a series for all points in the list could not be found, a warning will be
displayed.

<P>The list of points is simply a text file with one line per point and each
line with the x, y, and z pixel coordinates.  There can be extra comment or
header lines; such lines are ignored if they don't begin with something
that could be interpreted as three numeric values.
<A HREF="Pick.html">Pick Points</A> or
<A HREF="FindPoints.html">Find Points</A> are two applications that could
be used to generate the list of points.

<P>FixBadPixel's user interface uses the <A HREF="Region.html">same
set of controls</A> for selecting and processing a region as other Priism
applications.  There are additional controls, the "PList" button and adjacent
text field, for selecting the point list file.  The
<A HREF="#NIteration">"Num Iteration"</A> field sets how many times to repeat
the set of interpolations on a given section; just leave its value at one
since repeating the process with the current algorithm doesn't give different
results and takes more time.

<P><A HREF="applycal.html">Apply Calibration</A> also includes a bad pixel
editing option, but it uses a simpler algorithm (simple replacement by another
nearby value) and expects a point list in the format generated by the
OM data collection software, Resolve 3D.  Bad pixel editing is typically
done before using <A HREF="CCDCor.html">CCDCor</A> to correct for systematic
intensity variations or deconvolving the data.

<H3>Topics</H3>
<P>
   Overview |
   <A HREF="Region.html">Region processing</A> |
   <A HREF="#NIteration">Number of iterations</A> |
   <A HREF="#CommandLine">Command line</A>

<H3>Related Priism Topics</H3>
<P>
   <A HREF="applycal.html">Apply Calibration</A> |
   <A HREF="Pick.html">Pick Points</A> |
   <A HREF="FindPoints.html">Find Points</A> |
   <A HREF="CCDCor.html">CCDCor</A> |
   <A HREF="Priism.html">Priism</A>
<HR>

<H2><A NAME="NIteration">Number of iterations</A></H2>
<P>FixBadPixel first interpolates the intensity at points in the input
list which have at least two neighbors that are not in the list.
Then it interpolates those points which have at least two neighbors which
either weren't in the list or were interpolated in the first batch of
interpolations.  This is repeated until all the points in the input list
have been handled.

<P>To repeat the series of interpolations, use a value greater than
one in the "Num Iteration" field.  With the current algorithm, the results
are the same when the interpolations are repeated so there is no reason
to use a value other than one.

<H3>Topics</H3>
<P>
   <A HREF="#FixBadPixel">Overview</A> |
   <A HREF="Region.html">Region processing</A> |
   Number of iterations |
   <A HREF="#CommandLine">Command line</A>
<HR>

<H2><A NAME="CommandLine">Command Line</A></H2>
<P>FixBadPixel accepts the command-line arguments described in
<A HREF="Region.html#COMMANDLINE">Region.html</A>.  In addition, FixBadPixel
has the following options:

<DL>
  <DT><CODE>-points=</CODE><VAR>file_name</VAR>
  <DD>Specifies that the file named <VAR>file_name</VAR> should be used
    as the source of the points to correct.

  <DT><CODE>-cycles=</CODE><VAR>n</VAR>
  <DD>Specifies that <VAR>n</VAR> should be performed.  If not specified,
    FixBadPixel performs one iteration.
</DL>

<P>As an example, the following

<PRE>
    FixBadPixel raw.dat corrected.dat -points=bad.pts
</PRE>

<P>copies the data from raw.dat to corrected.dat while editing the values at
the coordinates listed in bad.pts.

<H3>Topics</H3>
<P>
   <A HREF="#FixBadPixel">Overview</A> |
   <A HREF="Region.html">Region processing</A> |
   <A HREF="#NIteration">Number of iterations</A> |
   Command line
<HR>

</BODY>
</HTML>
