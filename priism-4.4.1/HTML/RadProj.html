<!DOCTYPE HTML PUBLIC "-//W3C//DTD 3.2 HTML//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: RadProj</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to project a data set on a Cartesian grid to polar, spherical, or cylindrical coordinates.">
  <META NAME="Keywords" CONTENT="Priism,projection,radial average,Cartesian,spherical,polar,cylindrical">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="Overview">RadProj</A></H1>
<H2>Overview</H2>
<P>RadProj takes a data set on a Cartesian grid and projects it to polar,
spherical, or cylindrical coordinates.  One of the types of projections
supported is radial averaging.

<P>A basic recipe for using RadProj is:

<OL>
  <P>Enter the name of the input dataset (must be in MRC format) in the
    "Input" field.
  <P>Choose the format for the projection result with the
    <A HREF="#OutputFormat">"Output format" menu</A>.  There are two
    basic categories of output formats:  text formats that support a
    projection to a single spatial dimension (for example, the projected
    intensity as a function of radius) or images that support a projection
    result that can have one to three spatial dimensions.
  <P>Enter the name of the output file to generate in the "Output" field.
  <P>From the options in the <A HREF="#OutputValues">"Output values" menu</A>,
    select how values are presented in the output file.  If your input
    data is real-valued, only two of the options are normally of interest:
    "real component" which causes the projection result to be stored without
    modification or "amplitude" which causes RadProj to save the absolute
    value of the projection result.  If your input data is complex-valued,
    any of the options may be of interest.  As in the real-valued case,
    the transformations specified through the "Output values" menu take
    place after the projection has been calculated.
  <P>Select the destination coordinate system from the
    <A HREF="#Coordinates">"Coordinates" menu</A>.  With polar coordinates,
    z slices in the input are not combined when forming the output.  The
    other two options, cylindrical and spherical, allow combination of
    values from different z slices.
  <P>Use the <A HREF="#Blending">"Blending" menu</A> to select how pixel
    values from the input are combined to form the projection result.
  <P>Enter into the <A HREF="#Center">"Center" field</A> the pixel coordinates
    for the point which will be the origin of the output coordinate
    system.  When you select a new input file, RadProj sets the center to be
    where it would be for a centered FFT or power spectrum result.
  <P>Adjust the <A HREF="#Bounds">range and spacing</A> for the bins that
    cover the output coordinates.  When you select a new input file, RadProj
    resets the bounds to generate a projection to the radial axis.
  <P>Press the "DoIt" button to generate the projection.
</OL>

<H3>Topics</H3>
<P>
  <A HREF="#Z">Z</A> |
  <A HREF="#T">T</A> |
  <A HREF="#W">W</A> |
  <A HREF="#OutputFormat">Output format</A> |
  <A HREF="#SectionLabel">Section label</A> |
  <A HREF="#OutputValues">Output values</A> |
  <A HREF="#Coordinates">Coordinates</A> |
  <A HREF="#Blending">Blending</A> |
  <A HREF="#Wrap">Wrap</A> |
  <A HREF="#Center">Center</A> |
  <A HREF="#Bounds">Bounds</A> |
  <A HREF="#Sampling">Sampling</A> |
  <A HREF="#CommandLine">Command line</A>

<H3>Related Priism Topics</H3>
<P>
  <A HREF="radialft_asym.html">radialft_asym</A> |
  <A HREF="2d_plot.html">2D Plot</A>
  <A HREF="Priism.html">Priism</A>
<HR>

<H2><A NAME="Z">Z</A></H2>
<P>If you set the <A HREF="#Coordinates">output coordinate system</A> to
be polar, you can use the "Z" field (near the top of the RadProj dialog) to
control the range of z sections processed from the input file.  With spherical
or cylindrical coordinates, that "Z" field is disabled and has no effect.  The
first value in the field is the starting section number (the sections are
numbered from zero).  The second value in the field is the inclusive
upper limit for the section numbers to process.  The third value is the
increment between the section numbers that will be processed.  Each time you
select a new input file, RadProj resets the wavelength toggle buttons so that
all the wavelengths in the input file will be processed.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="T">T</A></H2>
<P>Use the "T" field to control the range of times points processed from the
input file.  The first value in the field is the starting time point number
(the time points are numbered from zero).  The second value in the field is
the inclusive upper limit for the time points to process.  The third value is
the increment between the time points that will be processed.  Each time you
select a new input file, RadProj resets the wavelength toggle buttons so that
all the wavelengths in the input file will be processed.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="W">W</A></H2>
<P>Use the toggle buttons next to the "W" label to control which wavelengths
RadProj processes from the input file.  If the <VAR>i</VAR>th toggle button
is on, RadProj will process the <VAR>i</VAR>th wavelength.  Otherwise,
RadProj will not process the <VAR>i</VAR>th wavelength.  Each time you select
a new input file, RadProj resets the wavelength toggle buttons so that
all the wavelengths in the input file will be processed.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="OutputFormat">Output Format</A></H2>
<P>Use the "Output format" menu to control the file format of the projection
result.  The available choices are:

<DL>
  <DT>text: tab-delimited columns<DD>The output is a text file.  Within that
    file, a line, whose contents are set by the
    <A HREF="#SectionLabel">"Section label" field</A>, introduces the data
    from each input volume (if the output coordinates are spherical are
    cylindrical) or input section (if the output coordinates are polar).  The
    projection data is formatted in columns separated by a tab character.
    The first column holds the coordinates for the centers of the bins.  The
    second column holds the first component of the projection result.  The
    third column, only present if the output values have two components, holds
    the second component of the projection result.
  <DT>text: space-delimited columns<DD>Is the same as "tab-delimited columns"
    but the columns of data are separated by a single space rather than
    a tab character.
  <DT>text: comma-delimited columns<DD>Is the same as "tab-delimited columns"
    but the columns of data are separated by a comma rather than a tab
    character.
  <DT>text: 2d_plot<DD>The output is a text file compatible with Priism's
    <A HREF="2d_plot.html">2D Plot</A>.  The data form each input volume
    (if the output coordinates are spherical or cylindrical) or input
    section (if the output coordinates are polar) is stored as a separate
    graph in the file.  The contents of the <A HREF="#SectionLabel">"Section
    label" field</A> control the main titles of each graph.  
  <DT>text: 2d_plot & display<DD>Is the same as "2d_plot" except that
    RadProj will automatically call 2d_plot to display the result if the
    projection is successful.
  <DT>MRC images<DD>The output is in Priism's image data format.  The
    <A HREF="#SectionLabel">"Section label" field</A> has no effect for
    this format.  You can control how the dimensions of the output coordinate
    system map to the file dimensions with the "Order" menus in the controls
    for the <A HREF="#Bounds">output ranges and number of bins</A>.
</DL>

<P>Of these options, only the last allows you to have a projection result
which has two or more output dimensions with more than one bin.  With the
others, RadProj will enforce the constraint that there is only one output
dimension that has more than one bin.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="SectionLabel">Section Label</A></H2>
<P>If the output format is one of the text formats, the contents of the
"Section label" field are used as a template for a label to identify
the data from one input volume (if the output coordinate system is
cylindrical or spherical) or one input section (if the output coordinate
system is polar).  In the formats compatible with 2D Plot, the labels
are used for the graph titles.  For the other text formats, the label
is printed on its own line to introduce the projection results from an
input volume or section.

<P>Within the template, special conversions codes are recognized and
expanded to generate the labels that appear in the output file.  The
conversion codes consist of a percent sign followed by an optional i
followed by a letter to indicate the type of code.  Possible values for
the letter are:

<DL>
  <DT><STRONG>%</STRONG><DD>The conversion code is replaced by a single
    percent sign when generating a label.
  <DT><STRONG>z</STRONG><DD>The conversion code is replaced by the z
    index for the section when generating a label.
  <DT><STRONG>w</STRONG><DD>The conversion code is replaced by the wavelength
    index for the section when generating a label.
  <DT><STRONG>t</STRONG><DD>The conversion code is replaced by the time
    point index for the section when generating a label.
</DL>

<P>If the optional i modifier appears within a z, w, or t conversion code then
the index generated by the conversion code is computed relative to the input
file.  Otherwise, the indices generated are computed relative to the output
file.  If the output coordinate system is cylindrical or spherical, the
%z and %iz conversion codes expand to zero.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="OutputValues">Output Values</A></H2>
<P>After RadProj computes the projection, RadProj can apply an operation
to the value in each bin before it writes out the result.  The "Output values"
menu controls the type of operation applied.  The available options are:

<DL>
  <DT>real component<DD>If the input data is real-valued, RadProj does
    not modify the projection results before it saves them to the output file.
    If the input data is complex-valued, RadProj extracts the real component
    from the projection result and saves it.
  <DT>imaginary component<DD>If the input data is real-valued, RadProj records
    the result for each bin as zero.  If the input data is complex-valued,
    RadProj extracts the imaginary component from the projection result and
    saves it.
  <DT>real and imaginary components<DD>If the input data is real-valued,
    RadProj records the projection result as the real component in the output
    and zeroes for the imaginary component.  If the input data is
    complex-valued, RadProj saves both the real and imaginary components of the
    projection result without modification.
  <DT>amplitude<DD>If the input data is real-valued, RadProj saves the
    absolute value of the projection result.  If the input data is complex
    values, RadProj saves the magnitude of the projection result.
  <DT>phase<DD>If the input data is real-valued, RadProj records the
    result for a bin as zero if the projected value in the bin is non-negative
    or as pi if the projected value in the bin is negative.  If the input data
    is complex-valued, RadProj saves the phase (in units of radians) of the
    projection result.
  <DT>amplitude and phase<DD>If the input data is real-valued, RadProj saves
    the absolute value of the projection result as the first component and
    either zero (if the projection result is non-negative) or pi (if the
    projection result is negative) as the second component.  If the input data
    is complex-valued, RadProj saves the amplitude of the projection result as
    the first component and the phase (in units of radians) of the projection
    result as the second component.
</DL>

<P>For the "real and imaginary components" and "amplitude and phase" options,
the output consists of two components.  If the output format is MRC image
data, those components are saved as the real and imaginary parts, respectively,
in a complex-valued image.  If the output format is compatible with
<A HREF="2d_plot.html">2D Plot</A>, the two components are separate lines in
the graphs.  Otherwise, the two components appear as separate columns in the
output.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="Coordinates">Coordinates</A></H2>
<P>You have three choices for the output coordinate system:

<DL>
  <DT>polar<DD>The x and y coordinates of the input data are converted
    to r and theta.  r is the distance from the center point (only the x and y
    coordinates of the center matter).   theta ranges from -180 to 180 degrees.
    A value of 0 degrees corresponds to a ray pointing along the positive x
    axis and a value of 90 degrees corresponds to a ray pointing along the
    positive y axis.  With the polar coordinate system, RadProj treats each z
    section selected from the input independently and carries over the
    distinctions between the z sections to the output.
  <DT>cylindrical<DD>The x and y coordinates of the input data are converted
    to r and theta as in the polar case, but the cylindrical coordinate
    system allows the projection to combine different z sections from the
    input.
  <DT>spherical<DD>The x, y, and z coordinates of the input data are
    converted to r, theta, and phi.  r is the distance from the center point.
    theta and phi specify the orientation of the ray to a point from the
    center.  theta is the angle between the x axis and the projection of the
    ray onto the xy plane.  theta ranges from -180 to 180 degrees with
    zero degrees corresponding to a ray along the positive x axis and 90
    degrees corresponding to a ray along the positive y axis.  phi is the
    angle between the ray and the xy plane.  phi ranges from -90 to 90 degrees.
    A value of zero means the ray is in the xy plane.  A value of 90 degrees
    means the ray points along the positive z axis.
</DL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="Blending">Blending</A></H2>
<P>RadProj combines pixel values in the input to form the projection result.
Use the "Blending" menu to set how RadProj combines the input pixel values.
The available options are:

<DL>
  <DT>average<DD>The projection result for a bin is the sum of the intensities
    of the pixels whose coordinates fall within that bin divided by the number
    of pixels falling within that bin.  If a bin has bounds that extend past
    the dimensions of the input data, the regions outside of the input data
    set contribute nothing to either the numerator (the sum of the intensities)
    or the denominator (the count of pixels).  If no pixels fall within the
    bin, RadProj sets the projection result for that bin to zero.
  <DT>sum<DD>The projection result for a bin is the sum of the intensities
    of the pixels whose coordinates fall within that bin.
  <DT>maximum<DD>If the input data is real-valued, the projection result for
    a bin is the maximum intensity from the pixels whose coordinates fall
    within that bin.  If no pixels fall within the bin, RadProj sets the
    projection result for that bin to the minimum floating-point value (on the
    the order of -1x10^38).  If the input data is complex-valued, the
    projection result for a bin is the value with the largest amplitude from
    the pixels whose coordinates fall within the bin.  If no pixels fall
    within the bin, RadProj sets the projection result for that bin to zero.
  <DT>minimum<DD>If the input data is real-valued, the projection result for
    a bin is the minimum intensity from the pixels whose coordinates fall
    within that bin.  If no pixels fall within the bin, RadProj sets the
    projection result for that bin to the maximum floating-point value (on the
    order of 1x10^38).  If the input data is complex-valued, the projection
    result for a bin is the value with the smallest amplitude from the pixels
    whose coordinates fall within the bin.  If no pixels fall within the bin,
    RadProj sets the projection result for that bin to have real and imaginary
    components equal to the square root of the maximum floating-point value
    divided by two (on the order of 7x10^18).
</DL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="Wrap">Wrap</A></H2>
<P>The three "Wrap" toggle buttons are there to help accommodate noncentered
FFT results.  If a toggle for a direction (x, y, or z) is on, RadProj will
assume that first pixel and the last pixel in that direction correspond to
adjacent points and that there is a break between the <VAR>n</VAR>/2+1 and
<VAR>n</VAR>/2+2 pixel where <VAR>n</VAR> is the number of pixels in that
direction.  The toggle for z is only effective and enabled if the output
coordinate system is spherical or cylindrical.

<P>For a noncentered 2D FFT with only the nonnegative x frequencies available,
you would turn off the x toggle and turn on the y toggle.  For a noncentered
2D FFT with both positive and negative x frequencies available, you would
turn on both the x and y toggles.  You would handle noncentered 3D FFTs
in the same way:  turn on the y and z toggles and leave the x toggle off if
only the nonnegative x frequencies are available and turn it on if both
positive and negative x frequencies are available.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="Center">Center</A></H2>
<P>The three values in the "Center" field are the x, y, and z coordinates
in the input to use as the origin for the output coordinate system.  The
coordinates should be in units of pixels.  The value of the center's z
coordinate is only relevant if the output coordinate system is spherical.

<P>For FFT results, the common choices for the center are:

<DL>
  <DT>(<VAR>nx</VAR>-1)/2 (<VAR>ny</VAR>-1)/2 (<VAR>nz</VAR>-1)/2
  <DD>This is for centered FFT or power spectrum results and is what
    RadProj will put in the "Center" field when you select a new input file.

  <DT>0 (<VAR>ny</VAR>-1)/2 (<VAR>nz</VAR>-1)/2
  <DD>This is for centered FFT results where only the nonnegative x frequencies
    have been retained.

  <DT>0 0 0
  <DD>For noncentered FFT or power spectrum results
</DL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="Bounds">Bounds</A></H2>
<P>For each dimension in the output coordinate system there is a field to
set the range of values covered by the projection result, a field to set
the number of bins along that dimension, a field to show the corresponding
bin width, and a menu to set how that dimension is mapped to the output when
the results are saved as images.  For the range covered, the first value in
the field is the minimum value included and the second value is the upper
limit on the range (the upper limit itself is not included in the range).
For the r dimension, the units for the bounds are x pixels.  For the theta and
phi dimensions, the units for the bounds are degrees.  For the z dimension,
the units on the bounds are z pixels.  The bin size field for a dimension
shows the bin size in the same units as are used for the range.  You can change
the bin size and RadProj will update the number of bins so that it most
closely approximates the value you entered.  RadProj then coerces the bin size
to match the size given by the number of bins and the range.  Keep in mind
that you can only have one dimension that has more than one bin if the selected
output format is one of the text formats.  When you change one dimension to
have more than one bin, RadProj will automatically set the number of bins
in the other dimensions to be on in order to enforce that restriction.

<P>The "Order" menus are only relevant if the output format is MRC.  The
dimension that has an order of one will appear as the x dimension in the
MRC data, the dimension that has an order of two will appear as the y dimension
in the MRC data, and the dimension that has an order of three will appear
as the z dimension in the MRC data.

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="Sampling">Sampling</A></H2>
<P>To calculate the projection, RadProj uses a splatting technique:  the
intensity for a pixel in the input is assigned to the bin that contains
the point corresponding to the center of the pixel.  There can be aliasing
artifacts (i.e. the input sampling is not fine enough to handle your
chosen output sampling) in the output with this method.  Those artifacts
are more significant at smaller radii.  To mitigate the aliasing, you
can have RadProj resample your data to a finer grid and then project
the resampled data.  The "Sampling" field holds the factor by which
to increase the sampling.  Allowed sampling factors are integers from one to
eight.  The interpolation menu controls how the pixel values at the
resampled grid points are calculated from the original grid.  The allowed
interpolation options are:

<DL>
  <DT>nearest neighbor<DD>The intensity at a new grid point is the intensity
    of the closest point from the input data.
  <DT>linear<DD>The intensity at a new grid point is bilinearly (if the
    output coordinate system is polar) or trilinearly (if the output
    coordinate system is cylindrical or spherical) interpolated from the
    original data values.
  <DT>cubic<DD>The intensity at a new grid point is computed via a cubic
    convolution kernel (two dimensional if the output coordinate system is
    polar; three dimensional in the other cases).
  <DT>cubic positivity<DD>Is similar to the cubic method, but if the
    input data is real-valued, an intensity of zero is used instead
    of the interpolated intensity at any grid point where the interpolated
    intensity is negative.
</DL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

<H2><A NAME="CommandLine">Command Line</A></H2>
<P>You can use RadProj without the graphical user interface.  The basic
syntax to call it without any user intervention is (optional parts are enclosed
in brackets): <CODE>RadProj</CODE> <VAR>input_mrc_file_name</VAR>
<VAR>output_file_name</VAR> [<VAR>options</VAR>].
<VAR>input_mrc_file_name</VAR> is the path to the MRC file or image window
that you want to project.  <VAR>output_file_name</VAR> is the name of the file
that you want to generate.  For reliable operation,
<VAR>input_mrc_file_name</VAR> and <VAR>output_file_name</VAR> must not refer
to the same file or image window.  <VAR>options</VAR> is zero or more of the
options described below.  As an example, this command,

<PRE>
    RadProj fft.dat out.txt -spherical -components=amplitude -average \
        -format=text -center=0:0:0 -wrapx -wrapy -wrapz -r=0:360 -nr=360
</PRE>

<P>radially averages the amplitudes of a 3D Fourier transform in fft.dat and
writes the result to a text file, out.txt.

<P>Unless you specify otherwise with command line options, RadProj will compute
an average projection using polar coordinates and will write the amplitude of
the projected result as a text file compatible with Priism's
<A HREF="2d_plot.html">2D Plot</A>.

<P>Options that are understood by RadProj are:
<DL>
    <DT><CODE>-average</CODE>
    <DD>Causes RadProj to report the average of the results that fall within
      a bin as the projection result for a bin.  Alternatives to this are
      <CODE>-max</CODE>, <CODE>-min</CODE>, and <CODE>-sum</CODE>.
    <DT><CODE>-center=</CODE><VAR>cx</VAR><CODE>:</CODE><VAR>cy</VAR><CODE>:</CODE>:<VAR>cz</VAR>
    <DD>Sets the center for the coordinate system.  Specify the center's
      coordinates as the (perhaps fractional) coordinate indices for the
      input data ((0.0, 0.0, 0.0) is the lower-left corner of the data set
      and (<VAR>nx</VAR>, <VAR>ny</VAR>, <VAR>nz</VAR>) is just past the
      upper-right corner of the data set.  For polar coordinate systems, the
      third coordinate of the center will have no effect on the result.  If
      you do not specify the center, RadProj will use (<VAR>nx</VAR>/2,
      <VAR>ny</VAR>/2, <VAR>nz</VAR>/2).  Note, any remainders from the
      division operations in that expressions will be discarded.
    <DT><CODE>-components=</CODE><VAR>cname</VAR>
    <DD>Selects which components of complex-valued data to save.  If the
      data is real-valued, RadProj will treat it as complex-valued data with
      the imaginary parts set to zero.  For files in 2D Plot's format,
      different components become lines in the same graph.  For files in
      plain text, the different components are saved in separate columns.  For
      files in the MRC format, the first component is stored as the real
      part of a complex-valued image and the second component is stored as
      imaginary part of a complex-valued image.  <VAR>cname</VAR> must be one
      of the following:
      <DL>
         <DT>real<DD>Record the real component of the projection result.
         <DT>imaginary<DD>Record the imaginary component of the projection
           result.
         <DT>real+imag<DD>Record both the real and imaginary components of the
           projection result.
         <DT>amplitude<DD>Record the amplitude (square root of the sum of the
           real component squared and the imaginary component squared) of the
           projection result.  This is the default when you do not use the
           option, <CODE>-components</CODE>.
         <DT>phase<DD>Record the phase (in radians) for the projection result.
         <DT>amplitude+phase<DD>Record the amplitude and phase (in radians) of
           the projection result.
      </DL>
    <DT><CODE>-cylindrical</CODE>
    <DD>Causes RadProj to project to a cylindrical coordinate system where
      the axis of the cylinder is parallel to the z axis of the input data.
      You can set the coordinates of the center of the cylinder with
      <CODE>-center</CODE>.  Use the <CODE>-r</CODE>, <CODE>-theta</CODE>,
      and <CODE>-z</CODE> options to set the bounds for regions where the
      projections will be computed.  You may use the <CODE>-nr</CODE>,
      <CODE>-ntheta</CODE>, and <CODE>-nz</CODE> options to set the number
      of bins in each dimension.
    <DT><CODE>-display-plot</CODE>
    <DD>Causes RadProj to display the projection result with
      <A HREF="2d_plot.html">2D Plot</A> if you've set the output format to
       2D Plot's format with the command line option,
       <CODE>-format=2dplot</CODE>.
    <DT><CODE>-delimiter=</CODE><VAR>dname</VAR>
    <DD>Sets the character used to separate columns if you've set the output
      format to be plain text with the command line option,
      <CODE>-format=text</CODE>.  <VAR>dname</VAR> may be <CODE>comma</CODE>,
      <CODE>space</CODE>, or <CODE>tab</CODE>.  Unless you select a delimiter,
      RadProj will use a single tab character to separate columns.
    <DT><CODE>-factor=</CODE><VAR>ssf</VAR>
    <DD>Sets the resampling factor, <VAR>ssf</VAR>.  <VAR>ssf</VAR> must be
      a positive integer.  If <VAR>ssf</VAR> is greater than one, the
      projection is computed from a resampled version of the original data
      where each sample interval has been divided into <VAR>ssf</VAR> evenly
      sized parts.  Use the command line option, <CODE>-interp</CODE> to set
      the interpolation algorithm used when resampling.  If you do not use
      the option, <CODE>-factor</CODE>, RadProj uses the original data without
      resampling.
    <DT><CODE>-format=</CODE><VAR>fmt</VAR>
    <DD>Sets the format of the file written by RadProj.  <VAR>fmt</VAR> may
      be <CODE>2dplot</CODE>, <CODE>mrc</CODE>, or <CODE>text</CODE>.  The
      first format is a text format which can be read by Priism's
      <A HREF="2d_plot.html">2D Plot</A> and may be used when projecting to one
      spatial dimension.  This is the format that RadProj will use when you
      do not select an output format.  The command line options,
      <CODE>-display-plot</CODE> and <CODE>-seclabel</CODE>, have an effect
      when writing files for 2D Plot.  The second format uses Priism's native
      file format for image data to store the projection data.  You may use
      the option, <CODE>-order</CODE>, to set the ordering of the dimensions
      in that format.  The third format is a text format which may be used
      when projecting to one spatial dimension.  The generated file will have
      two or three columns of data.  The first column holds the coordinates
      for the bin centers.  The second column holds the first component of the
      projection result.  The third columns holds the second component for the
      projection result and will only be written if you used the
      <CODE>-components</CODE> option to save multiple components.  You may use
      the <CODE>-delimiter</CODE> option to set character used to separate the
      columns.  You may also use the <CODE>-seclabel</CODE> option to set the
      text introducing a new chunk (either a volume for cylindrical or
      spherical projections or a section for a polar projection) of data.
    <DT><CODE>-interp=aname</CODE>
    <DD>Sets the interpolation algorithm used when the original data is
      resampled to a finer grid before the projection.  <VAR>aname</VAR> must
      be one of the following:
      <DL>
        <DT>nn<DD>Use the value at the nearest original grid point when
          resampling.  This algorithm will be used if you do not include
          <CODE>-interp</CODE> in the command line options.
        <DT>linear<DD>Uses a bilinear (for polar coordinates) or trilinear
          (for cylindrical or spherical coordinates) interpolation when
          resampling.
        <DT>cubic<DD>Uses a bicubic or tricubic interpolation when resampling.
        <DT>cubic+<DD>Uses a bicubic or tricubic interpolation with the result
          coerced to be non-negative if the input is real-valued.
      </DL>
    <DT><CODE>-max</CODE>
    <DD>Causes RadProj to report the maximum of the results that fall within
      a bin as the projection result for a bin.  Alternatives to this are
      <CODE>-average</CODE>, <CODE>-min</CODE>, and <CODE>-sum</CODE>.
    <DT><CODE>-min</CODE>
    <DD>Causes RadProj to report the minimum of the results that fall within
      a bin as the projection result for a bin.  Alternatives to this are
      <CODE>-average</CODE>, <CODE>-max</CODE>, and <CODE>-sum</CODE>.
    <DT><CODE>-nphi=</CODE><VAR>np</VAR>
    <DD>Sets the number of bins in the phi dimension to be <VAR>np</VAR>.
      <VAR>np</VAR> must be a positive integer.  Only has an effect if you
      also select a <A HREF="#Coordinates">spherical coordinate system</A>
      with the option, <CODE>-spherical</CODE>.  If you do not use the option,
      <CODE>-nphi</CODE>, RadProj will use one bin in the phi dimension.
    <DT><CODE>-nr=</CODE><VAR>nr</VAR>
    <DD>Sets the number of bins in the
      <A HREF="#Coordinates">radial (r) dimension</A> to be <VAR>nr</VAR>.
      <VAR>nr</VAR> must be a positive integer.  If you do not use the option,
      <CODE>-nr</CODE>, RadProj will use one bin in the radial dimension.
    <DT><CODE>-ntheta=</CODE><VAR>ntheta</VAR>
    <DD>Sets the number of bins in the
      <A HREF="#Coordinates">theta dimension</A> to be <VAR>ntheta</VAR>.
      <VAR>ntheta</VAR> must be positive integer.  If you not use the option,
      <CODE>-ntheta</CODE>, RadProj will use on bin in the theta dimension.
    <DT><CODE>-nz=</CODE><VAR>nz</VAR>
    <DD>Sets the number of bins in the z dimension to be <VAR>nz</VAR>.
      <VAR>nz</VAR> must be a positive integer.  Only has an effect if you also
      select a <A HREF="#Coordinates">cylindrical coordinate system</A> with
      the option, <CODE>-cylindrical</CODE>.  If you do not use the option,
      <CODE>-nz</CODE>, RadProj will use one bin in the z dimension.
    <DT><CODE>-order=</CODE><VAR>dname1</VAR>[<CODE>:</CODE><VAR>dname2</VAR>...]
    <DD>Sets the ordering of the dimensions in the output file; that is only
      useful if the output format is MRC, as set by the option,
      <CODE>-format=mrc</CODE>.  RadProj will map the dimensions of the chosen
      coordinate system to the x, y, and z coordinates, in that order,
      according to the order of the names you supply with the option,
      <CODE>-order</CODE>.  A name must be one of <CODE>r</CODE>,
      <CODE>theta</CODE>, <CODE>phi</CODE>, or <CODE>z</CODE>.  Using a name
      that is not valid for the coordinate system you've selected
      (<CODE>phi</CODE> for polar or cylindrical coordinates or <CODE>z</CODE>
      for polar or spherical coordinates), will cause RadProj to exit with an
      error message.  If you supply multiple coordinate names, you must
      separate them with single colons, and RadProj will not allow a
      coordinate name to appear more than once.  If you do not assign all the
      dimensions for a coordinate system, RadProj will assign them as follows:
      <UL>
        <LI>For polar coordinates, loop through the output dimensions, x and
          y, in that order.  If an output coordinate is unassigned, assign it
          to the first dimension that is unassigned from r and theta, in that
          order.
        <LI>For cylindrical coordinates, loop through the output dimensions,
          x, y, and z, in that order.  If an output coordinate is unassigned,
          assign it to the first dimension that is unassigned from r, theta,
          and z, in that order.
        <LI>For spherical coordinates, loop through the output dimensions,
          x, y, and z, in that order.  If an output coordinate is unassigned,
          assign it to the first dimension that is unassigned from r, theta,
          and phi, in that order.
      </UL>
    <DT><CODE>-phi=</CODE><VAR>p0</VAR><CODE>:</CODE><VAR>p1</VAR> or
        <CODE>-phi=</CODE><VAR>p0</VAR><CODE>:</CODE><VAR>p1</VAR><CODE>:</CODE><VAR>ps</VAR>
    <DD>Selects the range of coordinates in the
      <A HREF="#Coordinates">phi dimension</A> to be covered by bins.
      The first form sets the start, <VAR>p0</VAR> and end, <VAR>p1</VAR> of
      the range and leaves the number of bins to be set by the option,
      <CODE>-nphi</CODE>.  The second form also sets the width,
      <VAR>ps</VAR>, of each bin where <VAR>ps</VAR> must be positive.
      <VAR>p0</VAR> and <VAR>p1</VAR> must be between -90.01 and 90.01.
      Internally, RadProj will exchange <VAR>p0</VAR> for <VAR>p1</VAR> if
      <VAR>p0</VAR> is greater than <VAR>p1</VAR> so the ordering of those two
      values has no effect on the results.   RadProj assumes that
      <VAR>p0</VAR>, <VAR>p1</VAR>, and <VAR>p2</VAR> are in units of degrees.
      If you do not use the option, <CODE>-phi</CODE>, the bins in the
      phi dimension will cover the range -90.01 degrees to 90.01 degrees.
    <DT><CODE>-polar</CODE>
    <DD>Causes RadProj to project to a polar coordinate system.  The first
      two coordinates set with <CODE>-center</CODE> define the coordinates
      of the pole (the third coordinate has no effect).  Use the
      <CODE>-r</CODE> and <CODE>-theta</CODE> options to set the bounds for
      the regions where projections wil be computed.  You may use the
      <CODE>-nr</CODE> and <CODE>-ntheta</CODE> options to set the number of
      bins in each dimension.  Use the <CODE>-z</CODE> option to select the
      z sections for which computations will be done.  The <CODE>-nphi</CODE>
      and <CODE>-nz</CODE> options have no effect for the polar coordinate
      system.
    <DT><CODE>-r=</CODE><VAR>r0</VAR><CODE>:</CODE><VAR>r1</VAR> or
        <CODE>-r=</CODE><VAR>r0</VAR><CODE>:</CODE><VAR>r1</VAR><CODE>:</CODE><VAR>rs</VAR>
    <DD>Selects the range of coordinates in the
      <A HREF="#Coordinates">radial (r) dimension</A> to be covered by bins.
      The first form sets the start, <VAR>r0</VAR> and end, <VAR>r1</VAR> of
      the range and leaves the number of bins to be set by the option,
      <CODE>-nr</CODE>.  The second form also sets the width, <VAR>rs</VAR>,
      of each bin where <VAR>rs</VAR> must be positive.  <VAR>r0</VAR> and
      <VAR>r1</VAR> must be non-negative.  Internally, RadProj will exchange
      <VAR>r0</VAR> for <VAR>r1</VAR> if <VAR>r0</VAR> is greater than
      <VAR>r1</VAR> so the ordering of those two values has no effect on the
      results.  RadProj will multiply values for <VAR>r0</VAR>, <VAR>r1</VAR>,
      and <VAR>rs</VAR> by the sampling interval in x for the data so you
      could say that the units for <VAR>r0</VAR>, <VAR>r1</VAR>, and
      <VAR>rs</VAR> are "x pixels".  If you do not use the option,
      <CODE>-r</CODE>, the bins in the radial dimension will cover the range
      from zero to <VAR>n</VAR>/2 + 0.01.  The division by two drops any
      remainder, and <VAR>n</VAR> is min(<VAR>nx</VAR>, <VAR>ny</VAR>) for
      cylindrical or polar coordinates and is min(<VAR>nx</VAR>, <VAR>ny</VAR>,
      <VAR>nz</VAR>) for spherical coordinates.  <VAR>nx</VAR>, <VAR>ny</VAR>,
      and <VAR>nz</VAR> are the number of samples in x, y, and, z,
      respectively, in the input file.
    <DT><CODE>-theta=</CODE><VAR>t0</VAR><CODE>:</CODE><VAR>t1</VAR> or
        <CODE>-theta=</CODE><VAR>t0</VAR><CODE>:</CODE><VAR>t1</VAR><CODE>:</CODE><VAR>ts</VAR>
    <DD>Selects the range of coordinates in the
      <A HREF="#Coordinates">theta dimension</A> to be covered by bins.
      The first form sets the start, <VAR>t0</VAR> and end, <VAR>t1</VAR> of
      the range and leaves the number of bins to be set by the option,
      <CODE>-ntheta</CODE>.  The second form also sets the width,
      <VAR>ts</VAR>, of each bin where <VAR>ts</VAR> must be positive.
      <VAR>t0</VAR> and <VAR>t1</VAR> must be between -180.01 and 180.01.
      Internally, RadProj will exchange <VAR>t0</VAR> for <VAR>t1</VAR> if
      <VAR>t0</VAR> is greater than <VAR>t1</VAR> so the ordering of those two
      values has no effect on the results.   RadProj assumes that
      <VAR>t0</VAR>, <VAR>t1</VAR>, and <VAR>t2</VAR> are in units of degrees.
      If you do not use the option, <CODE>-theta</CODE>, the bins in the
      theta dimension will cover the range -180.01 degrees to 180.01 degrees.
    <DT><CODE>-seclabel=</CODE><VAR>slabel</VAR>
    <DD>Causes RadProj to use <VAR>slabel</VAR> as a template for labels
      written to text files.  For more information on the template, consult the
      documentation for <A HREF="#SectionLabel">section labels</A>.  If you
      do not set a section label, RadProj uses <CODE>Z %iz W %iw T %it</CODE>
      as the template.
    <DT><CODE>-spherical</CODE>
    <DD>Causes RadProj to project to a spherical coordinate system.  Use
      the <CODE>-center</CODE> option to set the coordinates for the center
      of the coordinate system.  Use the <CODE>-r</CODE>, <CODE>-theta</CODE>,
      and <CODE>-phi</CODE> options to set the bounds of the regions where
      projections will be computed.  You may use the <CODE>-nr</CODE>,
      <CODE>-ntheta</CODE>, and <CODE>-nphi</CODE> options to set the number of
      bins in each dimension.
    <DT><CODE>-sum</CODE>
    <DD>Causes RadProj to report the sum of the results that fall within
      a bin as the projection result for a bin.  Alternatives to this are
      <CODE>-average</CODE>, <CODE>-max</CODE>, and <CODE>-min</CODE>.
    <DT><CODE>-t=</CODE><VAR>t0</VAR><CODE>:</CODE><VAR>t1</VAR> or
        <CODE>-t=</CODE><VAR>t0</VAR><CODE>:</CODE><VAR>t1</VAR><CODE>:</CODE><VAR>ts</VAR>
    <DD>Selects the range of time point indices to process from the input file.
      The first form selects all the time point indices from <VAR>t0</VAR> to
      <VAR>t1</VAR>, inclusive.  The second form selects any time point between
      <VAR>t0</VAR> and <VAR>t1</VAR> whose index is equal to <VAR>t0</VAR> +
      <VAR>ts</VAR> * <VAR>i</VAR> for some non-negative integer <VAR>i</VAR>.
      <VAR>t0</VAR> and <VAR>t1</VAR> must be non-negative integers with
      <VAR>t1</VAR> greater than or equal to <VAR>t0</VAR> and less than
      <VAR>nt</VAR>, the number of time points in the input file.
      <VAR>ts</VAR> must be a positive integer.  If you do not use the option,
      <CODE>-t</CODE>, RadProj will process all time points from the input
      file.
    <DT><CODE>-w=</CODE><VAR>w0</VAR>[<CODE>:</CODE><VAR>w1</VAR>...]
    <DD>Selects the wavelengths from the input file to process.  If you do
      not use the option, <CODE>-w</CODE>, RadProj will process all the
      input wavelengths.  You can specify the wavelengths to process either
      by their zero-based integer index in the input file, or if the wavelength
      in the header is greater than 200 and less than 2000, by the integer
      closest to the wavelength.  If you use the latter and there are
      multiple wavelengths with the same wavelength value, RadProj will pick
      the first wavelength with that wavelength value in the file.  You
      may specify multiple wavelengths:  separate the indices by colons.  The
      wavelength will be processed and written to the output file in the
      order given.
    <DT><CODE>-wrapx</CODE>
    <DD>If used, RadProj assumes the first and last samples in the x direction
      are adjacent and that there's a break between the coordinates of the
      <VAR>nx</VAR>/2+1 and <VAR>nx</VAR>/2+2 samples where <VAR>nx</VAR> is
      the number of samples in the x dimension.
    <DT><CODE>-wrapy</CODE>
    <DD>If used, RadProj assumes the first and last samples in the y direction
      are adjacent and that there's a break between the coordinates of the
      <VAR>ny</VAR>/2+1 and <VAR>ny</VAR>/2+2 samples where <VAR>ny</VAR> is
      the number of samples in the y dimension.
    <DT><CODE>-wrapz</CODE>
    <DD>If used, RadProj assumes the first and last samples in the z direction
      are adjacent and that there's a break between the coordinates of the
      <VAR>nz</VAR>/2+1 and <VAR>nz</VAR>/2+2 samples where <VAR>nz</VAR> is
      the number of samples in the z dimension.
    <DT><CODE>-z=</CODE><VAR>z0</VAR><CODE>:</CODE><VAR>z1</VAR> or
        <CODE>-z=</CODE><VAR>z0</VAR><CODE>:</CODE><VAR>z2</VAR><CODE>:</CODE><VAR>zs</VAR>
    <DD>If you use <A HREF="#Coordinates">cylindrical coordinates</A> this
      option sets the range in z to be covered by bins.  In that case, the
      first form sets the start, <VAR>z0</VAR> and end, <VAR>z1</VAR> of
      the range and leaves the number of bins to be set by the option,
      <CODE>-nz</CODE>.  The second form also sets the width, <VAR>zs</VAR>,
      of each bin where <VAR>zs</VAR> must be positive.  <VAR>z0</VAR> and
      <VAR>z1</VAR> must be non-negative.  Internally, RadProj will exchange
      <VAR>z0</VAR> for <VAR>z1</VAR> if <VAR>z0</VAR> is greater than
      <VAR>z1</VAR> so the ordering of those two values has no effect on the
      results.  The units of <VAR>z0</VAR>, <VAR>z1</VAR>, and <VAR>zs</VAR>
      are samples in z.  If you use
      <A HREF="#Coordinates">polar coordinates</A>, this option selects the
      range z sections to read from the input data.  In that case, first form
      selects all sections from <VAR>z0</VAR> to <VAR>z1</VAR> inclusive.  The
      second form selects any z section between <VAR>z0</VAR> and <VAR>z1</VAR>
      whose z index is equal to min(<VAR>z0</VAR>, <VAR>z1</VAR>) +
      <VAR>iz</VAR> * <VAR>zs</VAR> for some non-negative integer
      <VAR>iz</VAR>.  <VAR>zs</VAR> must be a positive integer, and
      <VAR>z0</VAR> and <VAR>z1</VAR> must be non-negative integers.  Whether
      <VAR>z0</VAR> is less than or equal to <VAR>z1</VAR> does not matter
      since RadProj will interchange their values if <VAR>z0</VAR> is greater
      then <VAR>z1</VAR>.  If you do not use the option, <CODE>-z</CODE>, the
      bins for the cylindrical coordinates will cover the z range from zero to
      <VAR>nz</VAR> minus one where <VAR>nz</VAR> is the number of z sections
      in the input data, and all z sections will be read for polar coordinates.
</DL>

<P><A HREF="#Overview">Return to overview</A>
<HR>

</BODY>
</HTML>
