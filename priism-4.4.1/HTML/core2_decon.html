<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: Muthuvel Arigovindan's ER-Decon II</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's implementation of Muthuvel Arigovindan's ER-Decon II algorithm for 3D deconvolution">
  <META NAME="Keywords" CONTENT="Priism,deconvolution">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="core2_decon">Muthuvel Arigovindan's ER-Decon II</A></H1>
<H2>Overview</H2>
<P>Muthuvel Arigovindan has devised two new 3D deconvolution algorithms; this
documentation describes Priism's implementation of the second one, ER-Decon II.
ER-Decon II, when correctly tuned, should generate higher quality deconvolved
results than Muthuvel Arigovindan's other algorithm, ER-Decon I, but may be
more difficult to use because there are two parameters, rather than one for
ER-Decon I, that you will likely need to tune for your data.  ER-Decon II has
also been extended to work with 2D data; at this time, ER-Decon I has not.

<P>ER-Decon II has three required parameters:  the name of the file with the
data to deconvolve, the name of the file which has the optical transfer
function (OTF) for the imaging system, and the name of the file to use for
recording the deconvolution result.  You can use the procedure described in
<A HREF="OTFAndPupil.html#measuring_otf">OTFAndPupil.html#measuring_otf</A>
to prepare the OTF.  There are additional parameters that affect the
algorithm, but the only two that likely need to be tuned for your data are
the <A HREF="#Smoothing">smoothing</A> and
<A HREF="#Nonlinearity">nonlinearity</A> parameters.

<P>The deconvolution application can be accessed from either the graphical
user interface or directly from the command line.  To bring up the graphical
user interface, use the Processing-&gt;OM Processing-&gt;ER-Decon II
option in the Priism menus.  That will generate a dialog with fields for the
three required file names at the top of the dialog.  Immediately below that are
controls to select a region to process from the measurement.  For further
information about those controls, look at
 <A HREF="BatchRegion.html">BatchRegion.html</A>.  The remaining fields in the
dialog are for the ER-Decon II algorithm parameters; you can find more
information about those parameters below.  At the bottom of the dialog
is a "Do It" button; pressing that button will start the processing with
the currently selected parameters.  The "Options" button at the bottom of the
dialog brings up another dialog where you can control certain aspects of
what happens when you press the "Do It" button.  You can find more information
about the "Do It" and "Options" buttons in
<A HREF="BatchRegion.html">BatchRegion.html</A>.  You can find the syntax
for the command-line interface for the deconvolution application in the
<A HREF="#CommandLine">"Command line"</A> topic of this document.

<P>The ER-Decon II algorithm was described in the paper, Arigovindan M, et al
(2013), "High-resolution restoration of 3D structures from widefield images
with extreme low signal-to-noise ratio", Proceedings of the National Academy
of Sciences of the United States of America, 110(43): 17344-13749.  The
implementation here is close to that algorithm.  The differences are some
relics of early experiments while the algorithm was developed (the
<A HREF="#Ratio">first ratio parameter</A> and the
<A HREF="#ExtraEntropyWeight">extra entropy weight</A>) and some refinements
after the paper was published (the
<A HREF="#LineSearch">2014 line search algorithm</A>).

<H3>Topics</H3>
<P>
   Overview |
   <A HREF="#NumberOfProcessors">Number of processors</A> |
   <A HREF="#Background">Background</A> |
   <A HREF="#Smoothing">Smoothing</A> |
   <A HREF="#Nonlinearity">Nonlinearity</A> |
   <A HREF="#PaddedZSize">Padded z size</A> |
   <A HREF="#Force2D">Force 2D</A> |
   <A HREF="#2DOTF">2D OTF</A> |
   <A HREF="#NumericalAperture">Numerical aperture</A> |
   <A HREF="#RefractiveIndex">Refractive index</A> |
   <A HREF="#IterationCount">Iteration count</A> |
   <A HREF="#Positivity">Positivity</A> |
   <A HREF="#Plotfile">Plot file</A>
   <A HREF="#Ratio">Ratio</A> |
   <A HREF="#MissingConeWeight">Missing cone weight</A> |
   <A HREF="#ExtraEntropyWeight">Extra entropy weight</A> |
   <A HREF="#AuxiliarySmoothing">Auxiliary smoothing</A> |
   <A HREF="#HighCutoff">HighCutoff</A> |
   <A HREF="#NormalizeOTF">Normalize OTF</A> |
   <A HREF="#LineSearch">Line search</A> |
   <A HREF="#Regularization">Regularization</A> |
   <A HREF="#OutputRFactor">Output r-factor</A> |
   <A HREF="#Relaxation">Relaxation</A> |
   <A HREF="#Tolerance">Tolerance</A> |
   <A HREF="#CommandLine">Command line</A>

<H3>Related Priism Topics</H3>
<P>
   <A HREF="BatchRegion.html">Batch processing</A> |
   <A HREF="CCDCor.html">Raw data correction</A> |
   <A HREF="OTFAndPupil.html">OTF and pupil function documentation</A> |
   <A HREF="core_decon.html">ER-Decon I</A> |
   <A HREF="Priism.html">Priism</A>
<HR>

<H2><A NAME="NumberOfProcessors">Number of Processors</A></H2>
<P>The deconvolution can be performed with multiple threads of execution.
On a system with multiple processors (or processor cores), using multiple
threads can reduce the time needed to complete the calculations.

<P>From the graphical user interface you can select a number of threads
to use using the "Number of Processors" field.  When the toggle button,
labeled "default", next to that field is on, the field will be disabled
and the number of threads to use will be determined by the destination
for the reconstruction job.  To adjust the value, you can turn the toggle
button off and enter the desired number of threads to use in the field.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Background">Background</A></H2>
<P>ER-Decon II gives you two ways to handle a constant background
signal in your data.  In the first, the application computes an estimate of
what the background is for each wavelength and then, prior to deconvolving
a wavelength, subtracts off that estimated background for that wavelength
multiplied by a value that you supply.  To set up that mode of operation from
the graphical user interface, turn off the toggle button (labeled
"absolute") next to the field labeled "Background" and then enter the value
for each wavelength that will multiply the estimated background level.

<P>In the second method for handling a constant background signal, you supply
the value to subtract from each wavelength and the application does not perform
its estimate of the background.  To set up that mode of operation from the
graphical user interface, turn on the toggle button next to the field labeled
"Background" and then enter the value for each wavelength that you want to
subtract from the input data.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Smoothing">Smoothing</A></H2>
<P>The value in the "Smoothing" field, along with the
<A HREF="#Nonlinearity">nonlinearity parameter</A>, are the two parameters that
you will likely have to tune for your data.  An appropriate choice for the
value will depend on the noise level of the data: use a higher value for
noisier data.  Any positive value is allowed.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="PaddedZSize">Padded Z Size</A></H2>
<P>Prior to deconvolution, the data will be padded in Z so that
it has the number of samples given in the field labeled "Padded Z Size".
When the adjacent toggle button labeled "Default" is on (i.e. pushed in),
the number of samples will be automatically calculated from the size in Z
of the region to process.  When that adjacent toggle button is off, you
are free to change the value for the padded size.  The value should be
positive and greater than or equal to the Z size of the processed region.
A value that is the product of small prime numbers (for instance a power of 2),
will improve how fast the deconvolution can be done and reduce round-off
errors in the processing.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Force2D">Force 2D</A></H2>
<P>The deconvolution can be done as a 2D procedure, section by section.  This
will happen automatically if your data only has one z slice per each time point
and wavelength pair.  The 2D form of the algorithm does not include the 3D
version's mechanism to compensate for the rays not observed by the objective
lens.  Therefore, the parameters to set the
<A HREF="#NumericalAperture">numerical aperture</A>,
<A HREF="#RefractiveIndex">refractive index of the immersion media</A>,
and the <A HREF="#MissingConeWeight">missing cone weight</A>, have no effect on
the result from the 2D algorithm.

<P><A HREF="#core2_decon">Return to the parameter list</A>
<HR>

<H2><A NAME="2DOTF">2D OTF</A></H2>
<P>If you wish to use a 2D OTF for 2D deconvolution, you will need
to turn on the "2D OTF" button of the user interface.  Otherwise, the
deconvolution application will assume that your OTF is a radially symmetric
OTF and extract the kz=0 plane for use as the OTF for 2D deconvolution.  The
deconvolution will terminate with an error message if you use a 2D OTF with
a 3D deconvolution.

<P><A HREF="#core2_decon">Return to the parameter list</A>
<HR>

<H2><A NAME="NumericalAperture">Numerical Aperture</A></H2>
<P>The 3D form of the algorithm compensates for the range of rays not observed
by the objective lens.  To specify the range of rays observed by the objective
lens for your data, enter the effective numerical aperture of the lens in the
field labeled "Numerical aperture" which is in the "Special Parameters" dialog.
The default value for the numerical aperture is 1.4; any positive value less
than or equal to the
<A HREF="#RefractiveIndex">refractive index of the immersion media</A> is
allowed.

<P>The value for the numerical aperture has no effect on the 2D form of the
algorithm.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="RefractiveIndex">Refractive Index</A></H2>
<P>The 3D form of the algorithm compensates for the range of rays not observed
by the objective lens.  The
<A HREF="#NumericalAperture">effective numerical aperture of the lens</A> and
the refractive index of the immersion media control which rays are not
observed.  To specify the refractive index of the immersion media, enter the
refractive index in the field labeled "Refractive index" which is in the
"Special Parameters" dialog.  The default value for the refractive index is
1.512; any positive value is allowed.  If you enter a value that is less than
the current numerical aperture, the graphical user interface will coerce the
numerical aperture to be equal to the refractive index.

<P>The value for the refractive index has no effect on the 2D form of the
algorithm.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="IterationCount">Iteration Count</A></H2>
<P>Sets the maximum number of iterations to perform.  If the calculations
satisfy your selected <A HREF="#Tolerance">level of tolerance</A> before the
maximum number of iterations has been performed, then the full number of
iterations will not be used.  The default value for the number of iterations
is fifty; any positive value is allowed.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Positivity">Positivity</A></H2>
<P>The value in the field labeled "Positivity" controls the size of the
corrections applied to keep values in the deconvolved result greater than or
equal to zero.  When the value in the "Positivity" field is zero, no
corrections will be made to keep values in the deconvolved result greater than
zero.  The default value in the "Positivity" field is one and any
value greater than or equal to zero will be accepted.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Plotfile">Plot File</A></H2>
<P>If you enter a file name that is not "none" or nothing at all, in the field
labeled "Plot file", a summary of the deconvolution algorithm's progress will
be written to that file in a form viewable with
<A HREF="2d_plot.html">2D Plot</A>.  The quantities reported in the file will
depend on the <A HREF="#LineSearch">line search algorithm</A> that you have
selected.  For the default line search algorithm, the file will have the
value of the cost function at each iteration and, optionally, the value of
the <A HREF="#OutputRFactor">r-factor</A> at each iteration.  For the line
search algorithm used in the 2013 PNAS paper and the original version of this
software, the file will have the value of termination criteria at each
iteration.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Ratio">Ratio</A></H2>
<P>The ER-Decon II algorithm employs regularization based on the
signal itself and the second derivatives.  The relative contribution of
those two components is controlled by the ratio parameters.  Valid values
for the first parameter range from zero to one.  Any non-negative value is
valid for the second parameter.  The default values are zero for the first
parameter and one for the second.

<P>The first ratio parameter is not used when the
<A HREF="#LineSearch">2014 line search algorithm</A> (which is the default) has
been selected.  The second ratio parameter is not used when the
<A HREF="#LineSearch">2014 line search algorithm</A> and
<A HREF="#Regularization">second-order total variation</A> regularization
have been selected.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="MissingConeWeight">Missing Cone Weight</A></H2>
<P>The 3D form of the ER-Decon II algorithm has a mechanism (the missing cone
filter) for compensating for the range of angles not observed by the objective
lens.  The missing cone weight is a scaling factor for that compensation
mechanism.  Any non-negative value is a valid value for the weight; the default
value is one hundred.

<P>The missing cone weight has no effect on the output when you use the 2D
form of the ER-Decon II algorithm.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="ExtraEntropyWeight">Extra Entropy Weight</A></H2>
<P>During development of the ER Type II deconvolution, Muthuvel Arigovindan
experimented with a term in the entropy that was, in the notation used in the
2013 PNAS paper, a scalar times the sum over r of Eg(r).  He abandoned the use
of that term in the PNAS paper and in the Matlab implementation of his
algorithm, but it remained in the first version of the C implementation where
the scalar had a fixed value of 0.0001.  You can now set the value of that
scalar from the special parameters dialog:  the value is in the field labeled
"Extra entropy weight".  On the command line, include
<CODE>-laml2=</CODE><VAR>f</VAR> in the options to set the scalar to be
<VAR>f</VAR>.  By default, the scalar will be zero to give the behavior
described in the PNAS paper.  To match what the original version of the C
implementation did, use a value of 0.0001.  Any non-negative value for the
scalar will be accepted.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="AuxiliarySmoothing">Auxiliary Smoothing</A></H2>
<P>The auxiliary smoothing parameter multiplies the
<A HREF="#Smoothing">smoothing parameter</A> in the automatic background
esimation.  Any positive value is a valid value for the auxiliary smoothing
parameter.  The default value is one hundred.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="LineSearch">Line Search</A></H2>
<P>The iterative portion of the calculation has two variants.  One is the
algorithm described in the 2013 PNAS paper and was used in the original version
of this software.  The other, which is the default, was developed more recently
by Muthuvel Arigovindan and should be more robust.  To select the algorithm
from the graphical user interface, change the menu labeled "Line Search" in the
special parameters dialog.  The option labeled "2013 algorithm" selects the
algorithm from the PNAS paper. The option labeled "2014 algorithm" is the
revised algorithm by Muthuvel Arigovindan.  On the the command line, use
<CODE>-linesearch=2013</CODE> to select the algorithm from the PNAS paper and
<CODE>-linesearch=2014</CODE> to select the revised algorithm.

<P>The different line search algorithms report different quantities in the
<A HREF="#Plotfile">plot file</A>.

<P>The algorithm from the PNAS paper has two additional parameters, the
<A HREF="#Relaxation">relaxation factor</A> and the
<A HREF="#Tolerance">tolerance</A>.  Those parameters have no effect on the
revised algorithm.

<P>Selecting the revised algorithm has the side effect of ignoring the
first of the <A HREF="#Ratio">ratio parameters</A>.  With the revised
algorithm, you have the option to adjust the form of the
<A HREF="#Regularization">regularization</A> and to
<A HREF="#OutputRFactor">include r-factor results</A> in the
<A HREF="#Plotfile">plot file</A>.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Regularization">Regularization</A></H2>
<P>If you use the <A HREF="#LineSearch">2014 line search algorithm</A>, you
have the choice to use Muthuvel Arigovindan's regularization as described in
the 2013 PNAS paper (the logarithm of one plus the
<A HREF="#Nonlinearity">nonlinearity parameter</A> times Eg(r) as defined
in the paper) or a regularization (the square root of one plus the
<A HREF="#Nonlinearity">nonlinearity parameter</A> times Eg(r)) that is more
similar to a second order total variation approach.  To change the
regularization from the graphical user interface, go the special parameters
dialog and select the one of the options from the menu labeled
"Regularization".  That menu is enabled only when the 2014 line search
algorithm has been selected.  To select the regularization on the command line,
include <CODE>-regtype=ma</CODE> in the options to select Muthuvel
Arigovindan's regularization or include <CODE>-regtype=tv2</CODE> to select
the second-order total variation regularization.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="OutputRFactor">Output r-factor</A></H2>
<P>When you've selected the
<A HREF="#LineSearch">2014 line search algorithm</A>, you have the option
to include r-factor (the sum of the absolute values of the differences between
the measurement and the blurred deconvolved result divided by the sum of the
absolute values of the measurement) results in the
<A HREF="#Plotfile">plot file</A>.  By default those results are not generated.
To include r-factors in the output plot file, turn on the toggle button labeled
"Output r-factor" in the special parameters dialog (that toggle button will
only be enabled if the <A HREF="#LineSearch">2014 line search</A> has been
selected).  From the command-line, include <CODE>-rfactor</CODE> in the options
to add r-factors to the plot file.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Relaxation">Relaxation</A></H2>
<P>In the iterative portion of the calculation with the
<A HREF="#LineSearch">2013 line search algorithm</A>, the relaxation parameter
is used to scale the correction term before it is added to the previous
iteration's result to give the result for the current iteration.  Any positive
value for the relaxation parameter is accepted.  The default value is 0.8.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Nonlinearity">Nonlinearity</A></H2>
<P>The nonlinearity parameter applies to the regularization calculations and
is, along with the <A HREF="#Smoothing">smoothing parameter</A>, one of the
parameters that you will likely have to tune for your data.  The default value
is ten thousand.  The program will accept any value greater than or equal to
zero, but the range of typically useful values is one hundred to ten thousand.

<P>The optimal value for the nonlinearity parameter appears to be proportional
to the optimal value for the smoothing parameter.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="HighCutoff">High Cutoff</A></H2>
<P>The default values for many of the deconvolution parameters were chosen
for data which had values ranging from zero to one.  To reduce how sensitive
good choices for those parameters are to the range of data values in your
data, each volume is, by default, scaled prior to applying the deconvolution
and then the inverse of the scale factor is applied to the deconvolution
result before saving it.  After the scaling, an intensity of one matches the
intensity at which the fraction, <VAR>f</VAR>, of the original volume has
larger intensity values.  The default value of <VAR>f</VAR> is .001; valid
values are greater than or equal to zero and less than one.  Turning on the
button labeled "disable" next to the field with the cutoff threshold bypasses
rescaling of the input data.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="Tolerance">Tolerance</A></H2>
<P>In the iterative portion of the calculation with the
<A HREF="#LineSearch">2013 line search algorithm</A>, the iterations will stop
early if the RMS difference between the prediction and the goal is less than
or equal to the tolerance value.  Any non-negative value for the tolerance
is accepted.  The default value is 0.0001.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="NormalizeOTF">Normalize OTF</A></H2>
<P>For transfer functions that have not been radially averaged, the
deconvolution application normally rescales all the values of the transfer
function by the value of the transfer function at zero frequency.  To prevent
rescaling of the transfer function, turn off the "Normalize OTF" toggle button
in the special parameters dialog, or on the command line, include
<CODE>-nonorm_otf</CODE> in the options.

<P>Radially averaged transfer functions are never rescaled.

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

<H2><A NAME="CommandLine">Command Line</A></H2>
<P>The command-line syntax for the ER-Decon II application is (optional parts
are in brackets):
<PRE>
    <CODE>core2_decon</CODE> <VAR>measurement_file</VAR> <VAR>result_file</VAR> <VAR>otf_file</VAR> [<VAR>options</VAR>]
</PRE>
<P>where options can be zero or more of the following in any order (if an
option appears multiple times the one appearing last on the command line takes
precedence):

<DL>
  <DT><CODE>-2D</CODE><DD>Causes each section to be
    <A HREF="#Force2D">processed independently</A>.  That will happen
    automatically if the data only has one z section per time point and
    wavelength pair.
  <DT><CODE>-abs_background</CODE><DD>If you supply this option,
    any values supplied by the <CODE>-sub</CODE> option are subtracted directly
    from the input data, and the application does not compute its estimate of
    the background.  When you do not supply the <CODE>-abs_background</CODE>
    option, the application computes an estimate of the background for each
    wavelength and multiplies that estimate by the value supplied by the
    <CODE>-sub</CODE> option for that wavelength to arrive at the value that
    will be subtracted from the input data.
  <DT><CODE>-alpha=</CODE><VAR>a</VAR><DD>Sets the
    <A HREF="#Nonlinearity">nonlinearity parameter's value</A> to be
    <VAR>a</VAR>.
  <DT><CODE>-ctf2d</CODE><DD>If the time and z dimensions each have one
    sample for the file describing the OTF, using this parameter causes
    the file to be interpreted as a 2D transfer function rather than the
    radial average of a 3D transfer function.  If you specify this option
    while performing a 3D deconvolution, the deconvolution application will
    exit with an error message.
  <DT><CODE>-cuth</CODE><VAR>t</VAR><DD>Sets the
    <A HREF="#HighCutoff">high cutoff</A> to be <VAR>t</VAR>.  Setting t to
    a value greater than one or less than zero disables rescaling the input
    data.
  <DT><CODE>-lamf=</CODE><VAR>f</VAR><DD>Sets the
    <A HREF="#Smoothing">smoothing parameter's value</A> to be <VAR>f</VAR>.
  <DT><CODE>-laml2=</CODE><VAR>f</VAR><DD>Sets the
    <A HREF="#ExtraEntropyWeight">extra entropy weight</A> to be <VAR>f</VAR>.
    If not set, the extra entropy weight is zero.
  <DT><CODE>-lamratio=</CODE><VAR>r1</VAR><CODE>:</CODE><VAR>r2</VAR><DD>Sets the
    <A HREF="#Ratio">ratio parameter values</A> to be <VAR>r1</VAR> and <VAR>r2</VAR>.
  <DT><CODE>-lampc=</CODE><VAR>p</VAR><DD>Sets the
    <A HREF="#MissingConeWeight">missing cone weight</A> to be <VAR>p</VAR>.
  <DT><CODE>-lampos=</CODE><VAR>p</VAR><DD>Sets the value of the
    <A HREF="#Positivity">positivity parameter</A> to be <VAR>p</VAR>.
  <DT><CODE>-lamsmooth=</CODE><VAR>s</VAR><DD>Sets the value of the
    <A HREF="#AuxiliarySmoothing">auxiliary smoothing parameter</A> to be
    <VAR>s</VAR>.
  <DT><CODE>-linesearch=</CODE><VAR>m</VAR><DD>Selects the
    <A HREF="#LineSearch">line search algorithm</A>.  <VAR>m</VAR> may be
    <CODE>2013</CODE> to select the line search algorithm described in the
    2013 PNAS paper and used in the original version of this software, or
    <VAR>m</VAR> may be <CODE>2014</CODE> to select a revised line search
    algorithm.  If you do no select a line search algorithm, the revised
    algorithm will be used.
  <DT><CODE>-na=</CODE><VAR>v</VAR><DD>Sets the
    <A HREF="#NumericalAperture">numerical aperture</A> to be <VAR>v</VAR>.
  <DT><CODE>-ncycl=</CODE><VAR>n</VAR><DD>Sets the
    <A HREF="#IterationCount">maximum number of iterations</A> to be
    <VAR>n</VAR>.
  <DT><CODE>-nimm=</CODE><VAR>n</VAR><DD>Sets the
    <A HREF="#RefractiveIndex">refractive index of the immersion media</A> to
    be <VAR>n</VAR>.
  <DT><CODE>-nonorm_otf</CODE><DD>Normally the transfer function will be
    rescaled to have a zero frequency response of one.  This option disables
    that rescaling for non-radially averaged transfer functions (radially
    averaged transfer functions are never rescaled).
  <DT><CODE>-np=</CODE><VAR>np</VAR><DD>Sets the number of threads to use
    to be <VAR>n</VAR>.  <VAR>n</VAR> must be a positive integer.  This option
    will be ignored if the environment variable, NSLOTS, is set.  When you
    do not supply this option, the number of threads will be the larger of one
    and the value of the environment variable, NSLOTS.  If that environment
    variable is not set or is not set to an integer, the number of threads
    will equal the number of processors on the machine.
  <DT><CODE>-nzpad=</CODE><VAR>n</VAR><DD>Sets the
    <A HREF="#PaddedZSize">size (in samples) in z after padding</A> to be
    <VAR>n</VAR>.
  <DT><CODE>-omega=</CODE><VAR>o</VAR><DD>Sets the
    <A HREF="#Relaxation">relaxation parameter's value</A> to be <VAR>o</VAR>.
  <DT><CODE>-oplotfile=</CODE><VAR>pltname</VAR><DD>Specifies that a summary
    of the algorithm's progress be written to the file named
    <VAR>pltname</VAR>.  The file is plain text and can be viewed with
    <A HREF="2d_plot.html">2D Plot</A>.  For more details, consult the
    <A HREF="#Plotfile">"Plot file" topic</A>.
  <DT><CODE>-regtype=</CODE><VAR>t</VAR><DD>Selects the form of
    <A HREF="#Regularization">regularization</A> to be used with the 2014
    line search algorithm.  <VAR>t</VAR> may be <CODE>ma</CODE> or
    <CODE>tv2</CODE>.  If you do not select the regularization, the program
    will act as if you included <CODE>-regtype=ma</CODE> in the options.
  <DT><CODE>-rfactor</CODE><DD>Causes <A HREF="#OutputRFactor">r-factor</A>
    results to be included in the <A HREF="#Plotfile">summary plot file</A>
    if you use the <A HREF="#LineSearch">2014 line search algorithm</A>.
  <DT><CODE>-sub=</CODE><VAR>b1</VAR>[<CODE>:</CODE><VAR>b2</VAR>...]<DD>The
    behavior of this option depends on whether the <CODE>-abs_background</CODE>
    has also been specified on the command line.  When
    <CODE>-abs_background</CODE> does not appear on the command line, the
    program computes an internal estimate of the background for each
    wavelength, multiplies that estimate by the value (<VAR>b1</VAR> for
    wavelength 1, <VAR>b2</VAR> for wavelength 2, ...) supplied by the
    <CODE>-sub</CODE> option, and then subtracts the result from the incoming
    data.  If the <CODE>-sub</CODE> option does not appear on the command line
    or does not set the value for a wavelength, the program acts as if the
    value for that wavelength is one.  When <CODE>-abs_background</CODE> option
    appears on the command line, the program directly subtracts the value
    supplied by the <CODE>-sub</CODE> option (b1 for wavelength 1, b2 for
    wavelength2, ...) from the incoming data.  In that case, if the
    <CODE>-sub</CODE> option does not appear on the command line or does not
    set the value for a wavelength, the program acts as if the value for that
    wavelength is zero.
  <DT><CODE>-t=</CODE><VAR>start</VAR>[<CODE>:</CODE><VAR>stop</VAR>[<CODE>:</CODE><VAR>step</VAR>]
    <DD>Selects the range of points in time to process from the input file.
    The default is to process the entire range present in the input.
    <VAR>start</VAR> and <VAR>stop</VAR> must be non-negative integers less
    than the number of time points in the input file.  Also, <VAR>start</VAR>
    must be less than or equal to <VAR>stop</VAR> and <VAR>step</VAR> must
    be greater than zero.
  <DT><CODE>-tol=</CODE><VAR>t</VAR><DD>Sets the
    <A HREF="#Tolerance">termination tolerance</A> to be <VAR>t</VAR>.
  <DT><CODE>-w=</CODE><VAR>w0</VAR>[<CODE>:</CODE><VAR>w1</VAR>...]<DD>Selects
    the wavelengths to process from the input file.  In the colon-separated
    list of wavelengths, you can select a wavelength by giving the wavelength
    position index (between zero and four, inclusive) in the input file or,
    if the wavelength in the header is greater than 200.5 and less than 1999.5
    nanometers, by the wavelength in nanometers rounded to the nearest
    integer.  If you do not specify this option, all wavelengths present in
    the input file will be processed.
  <DT><CODE>-x=</CODE><VAR>start</VAR>[<CODE>:</CODE><VAR>stop</VAR>]
    <DD>Selects the range of pixels in x to process from the input file.
    The default is to process the entire range present in the input.
    <VAR>start</VAR> and <VAR>stop</VAR> must be non-negative integers less
    than the number of pixels in the x dimension of the input file.  Also,
    <VAR>start</VAR> must be less than or equal to <VAR>stop</VAR>.
  <DT><CODE>-y=</CODE><VAR>start</VAR>[<CODE>:</CODE><VAR>stop</VAR>]
    <DD>Selects the range of pixels in y to process from the input file.
    The default is to process the entire range present in the input.
    <VAR>start</VAR> and <VAR>stop</VAR> must be non-negative integers less
    than the number of pixels in the y dimension of the input file.  Also,
    <VAR>start</VAR> must be less than or equal to <VAR>stop</VAR>.
  <DT><CODE>-z=</CODE><VAR>start</VAR>[<CODE>:</CODE><VAR>stop</VAR>]
    <DD>Selects the range of pixels in z to process from the input file.
    The default is to process the entire range present in the input.
    <VAR>start</VAR> and <VAR>stop</VAR> must be non-negative integers less
    than the number of pixels in the z dimension of the input file.  Also,
    <VAR>start</VAR> must be less than or equal to <VAR>stop</VAR>.
</DL>

<P><A HREF="#core2_decon">Return to overview</A>
<HR>

</BODY>
</HTML>
