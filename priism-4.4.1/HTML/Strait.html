<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: Straight</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to cut out tubular structures from a data stack and display it as a new data stack.">
  <META NAME="Keywords" CONTENT="Priism,modeling,tube">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="Strait">Straight</A></H1>
<H2>Overview</H2>
<P>The Straight tool cuts out tubular structures from an input data set and
displays this information as a new data stack. It uses a model file (created
using <A HREF="3DModel.html">3DModel</A>) that defines the radial axis of
the structure. The model file must be a simple, non-branched,
string-of-points type model.

<H3>Topics</H3>
<P>
  Overview |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>

<H3>Related Priism Topics</H3>
<P>
  <A HREF="3DModel.html">3D Model</A> |
  <A HREF="Priism.html">Priism</A>
<HR>

<H2><A NAME="ChooseObjects">Choose objects</A></H2>
<P>Use the <EM>choose objects</EM> button in the main dialog to open a dialog
with which you can set which objects in the model are used and the width,
as an odd number of pixels, of each object.

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  Choose objects |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#Spacing">Spacing</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="Waves">Waves</A></H2>
<P>The <EM>active waves</EM> toggles indicate which wavelengths will be
included in the output.

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  Waves |
  <A HREF="#Spacing">Spacing</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="Spacing">Spacing</A></H2>
<P>If you are straightening multiple objects, the traces, in either
the <A HREF="#View">"straight" or "tunnel" views</A> will be separated
by the number of pixels shown in the "spacing" field.

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  Spacing |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="SaveOptions">Axis profile options</A></H2>
<P>When the <A HREF="#View">viewing mode</A> is "straight" or "tunnel",
Straight can save a summary of the intensity data along the straightened
objects as a text file.  Use the <EM>save data</EM> button in the main
dialog to open a dialog with the controls for how this summary is generated.
In this dialog, <EM>tofile</EM> sets the name of the summary file and the
menu at the bottom right controls whether or not the summary is written
and the form of the summary data:

<DL>
  <DT>don't save<DD>No summary results are recorded.
  <DT>sum<DD>The object is broken into segments and the sum of the intensity
    in each segment is reported.
  <DT>average<DD>The object is broken into segments and the average intensity
    for each segment is reported.
</DL>

<P>The size of the segments for the <EM>sum</EM> and <EM>average</EM> options
is set with the <EM>group every</EM> controls.  The segments all have the
same length, but this length can either be measured in microns or in pixels
where a pixel, in this case, is one of the slices through the object used
to calculate the straightened form (see
<A HREF="#Slices">slice interpolation/orientation</A> for more information
about slices).

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#Spacing">Spacing</A> |
  Axis profile options |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="View">View</A></H2>
<P>There are three ways to view the data cut out from the data set:

<DL>
  <DT>straight<DD>The straightened object is show from the side.
  <DT>cookie<DD>The object is shown in its original position in the data set
    but all other regions of the data set are masked out.
  <DT>tunnel<DD>The straightened object is shown from a head-on view down the
    object's axis.
</DL>

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#Spacing">Spacing</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  View |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="Slices">Slice interpolation/orientation</A></H2>
<P>To calculate a straightened object, a series of slices perpendicular to
the object's axis are taken, intensity values in those slices are
interpolated from the original data set, and the slices are aligned relative
to each other.  The <EM>slices</EM> menu controls how the interpolation is
done:  with the <EM>real sp.</EM> option the interpolation is done using
coordinates that take into account the pixel spacings, origin, and rotation
angles in the data set header; with the <EM>data sp.</EM> option the
coordinates are in terms of the pixel indices.  How the slices are aligned
is set with the <EM>orientation</EM> menu.  With the <EM>correlate slices</EM>
option, a cross-correlation between a slice and the next one along the axis is
used to determine how to rotate the next slice about the object axis and bring
it into alignment.  With the <EM>turn slices up</EM> option, a slice is always
in view from the higher resolution direction (there may be problems with this
if the object is parallel to the z-axis which typically has the lowest
resolution).  The version of Straight in Priism 4.2.2 and earlier had
"correlate slices" on by default; in Priism 4.2.3 and later, "turn slices up"
is the default since the option to <A HREF="#SmoothJoints">"smooth joints"</A>
if off by default in that version of Straight.

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#Spacing">Spacing</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  Slice spacing/orientation |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="SmoothJoints">Smooth Joints</A></H2>
<P>The version of Straight in Priism 4.2.2 and earlier employed an algorithm
that would make smooth transitions near joints in the model for "straight"
or "tunnel" views.  For the "straight" view, those smooth transitions
introduced extra columns that broke the linear relationship between the column
number and distance along the model (for the "tunnel" view, there would be
extra z sections that broke the linear relationship between z section number
and distance along the model).  By default, the version of Straight in Priism
4.2.3 and later employs an algorithm that does not enforce smooth transitions
at joints.  The lack of smooth transitions at the model joints likely degrades
the performance of the <A HREF="#Slices">"correlate slices" option</A> so that
option is off by default.

<P>To force the Straight to make smooth transitions at the model joints as
it always did in Priism versions 4.2.2 and earlier, turn on the "smooth joints"
toggle button.

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#Spacing">Spacing</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  Smooth joints |
  <A HREF="#Status">Status</A>
<HR>

<H2><A NAME="Status">Status</A></H2>
<P>This field is used to display how far along the calculation is.

<H3>Topics</H3>
<P>
  <A HREF="#Strait">Overview</A> |
  <A HREF="#ChooseObjects">Choose objects</A> |
  <A HREF="#Waves">Waves</A> |
  <A HREF="#Spacing">Spacing</A> |
  <A HREF="#SaveOptions">Axis profile options</A> |
  <A HREF="#View">View</A> |
  <A HREF="#Slices">Slice interpolation/orientation</A> |
  <A HREF="#SmoothJoints">Smooth joints</A> |
  Status
<HR>

</BODY>
</HTML>
