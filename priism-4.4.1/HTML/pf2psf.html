<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: pf2psf</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to generate slices through the point spread function (PSF) from an image of the pupil function.">
  <META NAME="Keywords" CONTENT="Priism,pf2psf,PSF,pupil function">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="pf2psf">pf2psf</A></H1>
<P>pf2psf takes an image of a pupil function (generated by
<A HREF="phretavr.html">phretavr</A>, for instance) and computes slices through
the point spread function (PSF).  Currently, pf2psf can not directly work with
parameterized pupil functions:  use <A HREF="pfimage.html">pfimage</A> to
generate an image of the parameterized pupil function and use that image as
the input to pf2psf.

<P>To use pf2psf, invoke it from the command line.  The expected form of the
command line is (optional parts are shown in brackets):

<PRE>
    pf2psf <VAR>pupil_image</VAR> <VAR>psf_image</VAR> \
        [-w=<VAR>w1</VAR>[:<VAR>w2</VAR>...]] [-center=<VAR>xc</VAR>[:<VAR>yc</VAR>]] \
        [-delz=<VAR>dz</VAR>] [-detfill=<VAR>ax</VAR>[:<VAR>ay</VAR>]] [-intensity] \
        [-reversez] [-xzsec] [-zshift=<VAR>d</VAR>] [-zsize=<VAR>nz</VAR>]
</PRE>

<P>or

<PRE>
    pf2psf -h
</PRE>

<P>where the latter form simply prints a description of the expected input
parameters and then exits.  The meanings of the different entries on the
command line are:

<DL>
  <DT><VAR>pupil_image</VAR>
  <DD><VAR>pupil_image</VAR> is the name of the file containing the pupil
    function image.

  <DT><VAR>psf_image</VAR>
  <DD><VAR>psf_image</VAR> is the name of the file to generate.  It will
    contain the PSF result.

  <DT><CODE>-center=</CODE><VAR>xc</VAR>[<CODE>:</CODE><VAR>yc</VAR>]
  <DD>Specifies the pixel coordinates for the center in x and y of the
    generated PSF.  By default, pf2psf places the center at
    floor((<VAR>nx</VAR>-1)/2), floor((<VAR>ny</VAR>-1)/2) where
    <VAR>nx</VAR> and <VAR>ny</VAR> are the dimensions (in pixels) of the
    pupil function image.

  <DT><CODE>-delz=</CODE><VAR>dz</VAR>
  <DD>Specifies the z sampling interval, <VAR>dz</VAR>, in microns.  By
    default, pf2psf uses a sampling in z equal to twice the x spatial sampling
    used for the pupil function image.

  <DT><CODE>-detfill=</CODE><VAR>ax</VAR>[<CODE>:</CODE><VAR>ay</VAR>]
  <DD>Sets the detector size to use when modeling the effect of averaging
    over a pixel.  The size is expressed as a multiple of the spatial sampling
   inferred from the input pupil function image.  By default, pf2psf assumes
   that each pixel is a point (ax is 0 and ay is 0).  If ay is omitted,
   pf2psf assumes that it is the same as ax.  The detector size is only
   factored into the PSF calculation when calculating the intensity PSF.

  <DT><CODE>-intensity</CODE>
  <DD>If -intensity is included in the options, pf2psf computes the intensity
    PSF rather than the amplitude PSF.

  <DT><CODE>-reversez</CODE>
  <DD>If -reversez is included in the options, pf2psf assumes the first z
    section is closest to the lens.  Otherwise, pf2psf assumes the last z
    section is closest to the lens.

  <DT><CODE>-xzsec</CODE>
  <DD>If -xzsec is included in the options, pf2psf computes an xz slice
    through the center of the PSF rather than one or more xy slices through
    the PSF.

  <DT><CODE>-w=</CODE><VAR>w1</VAR>[<CODE>:</CODE><VAR>w2</VAR>...]
  <DD>Limits the processing to a subset of wavelengths stored in the pupil
    file.  Wavelengths may be specified by their zero-based index in the input
    pupil file or by their wavelength (in nanometers).  pf2psf by default
    processes all wavelengths stored in the input pupil file.

  <DT><CODE>-zshift=</CODE><VAR>d</VAR>
  <DD>Specifies the z shift, <VAR>d</VAR>, in microns of the central z
    section from the focal plane.  A positive value for the shift indicates
    that the central z section is closer to the lens than the focal plane, a
    negative value of the shift indicates that the central z section is
    farther from the lens than the focal plane.  If nz is the number of
    sections, the zero-based index for the central z section is
    floor((<VAR>nz</VAR> - 1) / 2) where <VAR>nz</VAR> is the size set by
    -zsize.  By default, <VAR>d</VAR> is zero (the central section matches
    the focal plane).

  <DT><CODE>-zsize=</CODE><VAR>nz</VAR>
  <DD>Specifies the number of z sections to write.  If not specified, pf2psf
    computes one z section.
</DL>

<H2>Related Priism Topics</H2>
<P>
   <A HREF="phretavr.html">phretavr</A> |
   <A HREF="pffit.html">pfimage</A> |
   <A HREF="Priism.html">Priism</A>
<HR>

</BODY>
</HTML>
