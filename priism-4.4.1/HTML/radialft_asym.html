<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
  <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <TITLE>Priism Help: radialft_asym</TITLE>
  <META NAME="Description" CONTENT="On-line help for Priism's application to radially average a 3D Fourier transform to generate an OTF file for deconvolution.">
  <META NAME="Keywords" CONTENT="Priism,radialft_asym,deconvolution,otf">
  <LINK REV=MADE HREF="mailto:ive@msg.ucsf.edu">
</HEAD>
<BODY>

<H1><A NAME="radialft_asym">radialft_asym</A></H1>
<P>radialft_asym implements the last step of constructing an OTF for use
in deconvolution.  It radially averages a 3D Fourier transform of a
measured point source (the transform could be performed with
<A HREF="FTransform3D.html">Priism's FTransform3D</A>) and writes the result in
the format expected by the deconvolution application.  

<P>To use radialft_asym, invoke it from the command line.  The expected form
of the command line is (optional parts are shown in brackets):

<PRE>
    radialft_asym <VAR>transform_file</VAR> <VAR>otf_file</VAR> -cofm=<VAR>x</VAR>:<VAR>y</VAR>:<VAR>z</VAR> \
        [-flip] [-makereal] [-fixaxes=<VAR>flag</VAR>]
</PRE>

<P>The meanings of the different entries on the command line are:

<DL>
  <DT><VAR>transform_file</VAR>
  <DD><VAR>transform_file</VAR> is expected to be the name of a Priism image
    file which holds the result of a real-&gt;complex 3D Fourier transform
    where the redundant negative x frequencies are not retained (i.e.
    for <A HREF="FTransform3D.html">Priism's FTransform3D</A> do not use
    the 'fully complex' option) and the zero frequency component is at the
    lower left corner of the first section (i.e. for Priism's FTransform3D do
    no use the "zero frequency centered" option).  radialft_asym accepts two
    possible orderings of the dimensions in <VAR>transform_file</VAR>.  The
    default is to expect that the transform rearranged the dimensions so that
    the untransformed arrangement (x,y,z) became (z,x,y).  This is the format
    generated by the old command-line program, threedfftpjs.  If the -flip
    option is supplied, radialft_asym assumes that <VAR>transform_file</VAR>
    is in the other accepted format where the transform did not rearrange the
    dimensions (<A HREF="FTransform3D.html">Priism's FTransform3D</A>
    generates this alternative format).  radialft_asym expects that the pixel
    spacings in the header of <VAR>transform_file</VAR> are the unrearranged
    pixel spacings of the transformed data and that the spacings have not been
    converted to frequency units.

  <DT><VAR>otf_file</VAR>
  <DD><VAR>otf_file</VAR> is the name of the OTF file to generate.

  <DT><CODE>-cofm=</CODE><VAR>x</VAR><CODE>:</CODE><VAR>y</VAR><CODE>:</CODE><VAR>z</VAR>
  <DD>The -cofm (center-of-mass) option is required in order to correct for
    the point source's displacement from the origin.  If the phases have
    already been corrected for the shift, use <CODE>-cofm=0:0:0</CODE>.
    Assuming the Fourier transform was done with threedfftpjs or with
    FTransform3D, <VAR>x</VAR>, <VAR>y</VAR>, and <VAR>z</VAR> are the
    estimated pixel coordinates for the point source in the untransformed data.
    If you use another Fourier transform implementation, the signs on
    <VAR>x</VAR>, <VAR>y</VAR>, and <VAR>z</VAR> may need to be changed to be
    consistent with the sign(s) used in the Fourier transform.  With the
    <CODE>-flip</CODE> option, radialft_asym assumes the Fourier transform
    used a negative sign in the complex exponential.  Without the
    <CODE>-flip</CODE> option, radialft_asym assumes that the net effect of
    the transform (which in the case of threedfftpjs is done first in xy and
    then in z) is to have used a negative sign for the x and y dimensions but
    not for the z dimension.

  <DT><CODE>-flip</CODE>
  <DD>If -flip is supplied, radialft_asym assumes that the 3D Fourier
    transform did not rearrange the dimensions.  Use this option when running
    radialft_asym on the output of
    <A HREF="FTransform3D.html">Priism's FTransform3D</A>.

  <DT><CODE>-makereal</CODE>
  <DD>If -makereal is specified, the output OTF is the amplitude of the
    radially averaged input data and is therefore real-valued.  If the OTF
    is to be used for 2D deconvolutions, it must be real-valued.

  <DT><CODE>-fixaxes=</CODE><VAR>flag</VAR>
  <DD>The zero frequency components (the components along the x and y axis)
    of the OTF are frequently contaminated by artifacts unrelated to the point
    source.  One source of error is calibration inaccuracies in the gain and
    offset for individual CCD pixels; this contributes to terms along the y
    (i.e. radial) axis of the OTF.  One way to attempt to correct for these
    artifacts is to use the -fixaxes option which will cause the components
    along the y axis (if <VAR>flag</VAR> is greater than or equal to one)
    or both the x and y axes (if <VAR>flag</VAR> is greater then equal to two)
    to be replaced with values determined from the nearest off-axis components.
</DL>

<H2>Related Priism Topics</H2>
<P>
   <A HREF="OTFAndPupil.html">OTF documentation</A> |
   <A HREF="FTransform3D.html">3D Fourier transform</A> |
   <A HREF="Priism.html">Priism</A>
<HR>

</BODY>
</HTML>
